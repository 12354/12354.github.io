<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Audio Input Source Plug-in</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Audio Input Source Plug-in </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="referencematerial_audioinput_intro"></a>
About this plug-in</h1>
<p>This plug-in allows sound designers to use audio from an external source, for example a network stream, or a microphone connected to the PC or console.</p>
<h1><a class="anchor" id="referencematerial_audioinput_integrating"></a>
Integrating the plug-in</h1>
<p>Aside from regular plug-in initialization (see <a class="el" href="soundengine_integration_plugins.html">Integration Details - Plug-Ins</a>), integrating the Audio Input plugin requires the game to provide input audio data used by the various instances of the plug-in in the Wwise project. This is done through a callback mechanism, as exposed in <a class="el" href="_ak_audio_input_source_factory_8h.html">AkAudioInputSourceFactory.h</a>:</p>
<ul>
<li>At first, the game calls SetAudioInputCallbacks() to set the mandatory AkAudioInputPluginExecuteCallbackFunc which will be called whenever an instance of audio input requires more audio data.<ul>
<li><p class="startli">If the audio data is not a mono stream of 32-bit floating point values, the AkAudioInputPluginGetFormatCallbackFunc must be set. This callback only accepts audio data in the following formats, where the left and right channels are stored as shown for a 16-frame buffer:</p><ul>
<li>interleaved 16-bit integer (also known as <em>planar</em>) <div class="image">
<img src="dgm_interleaved_audio_format.png" alt=""/>
</div>
</li>
<li>non-interleaved 32-bit floating point <div class="image">
<img src="dgm_non_interleaved_audio_format.png" alt=""/>
</div>
</li>
</ul>
<p class="startli">AkAudioInputPluginGetFormatCallbackFunc uses <a class="el" href="struct_ak_audio_format.html">AkAudioFormat</a> which can be populated as shown in the example below. <a class="el" href="struct_ak_audio_format.html">AkAudioFormat</a> consists of audio data format specifications and channel configuration <a class="el" href="struct_ak_channel_config.html">AkChannelConfig</a>.</p>
<p class="startli"><a class="el" href="struct_ak_channel_config.html">AkChannelConfig</a> can be set with the help of one of the calls mentioned below: AkChannelConfig.SetAnonymous(...), AkChannelConfig.SetStandard(...) or AkChannelConfig.SetAmbisonic(...)</p>
<p class="startli">ChannelMask: There are no restrictions on channelmask. Standard and custom channelmasks are supported.</p>
<p class="startli">Interleaved format (<code>AK_INTERLEAVED</code>) only supports <code>AK_INT</code>, and non-interleaved format (<code>AK_NONINTERLEAVED</code>) only supports <code>AK_FLOAT</code>.</p>
</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line"><a class="code" href="struct_ak_audio_format.html">AkAudioFormat</a> audioFormat;</div>
<div class="line"><a class="code" href="struct_ak_channel_config.html">AkChannelConfig</a> audioChConfig;</div>
<div class="line">audioChConfig.SetStandard(0);</div>
<div class="line">audioFormat.SetAll(</div>
<div class="line">    48000,                  <span class="comment">// Sample rate</span></div>
<div class="line">    audioChConfig, <span class="comment">// \ref AkChannelConfig</span></div>
<div class="line">    16,                     <span class="comment">// Bits per samples</span></div>
<div class="line">    2,                      <span class="comment">// 2 bytes per samples</span></div>
<div class="line">    AK_INT,                 <span class="comment">// feeding integers(signed)</span></div>
<div class="line">    AK_INTERLEAVED</div>
<div class="line">    );</div>
</div><!-- fragment --><ul>
<li>Next, the game calls PostEvent to start the audio input plug-in.</li>
<li>The Sound Engine will call AkAudioInputPluginGetFormatCallbackFunc once at the beginning of playback and then AkAudioInputPluginExecuteCallbackFunc at each audio frame until the plug-in finishes execution (either through a stop action or the execute callback setting AK_NoMoreData on io_pBufferOut-&gt;eState).</li>
</ul>
<p>A very simple integration is demonstrated in the Microphone/AudioInput Demo demo, using a microphone as the input. In the Integration Demo Wwise Project, a Sound Voice named Microphone uses the Audio Input plug-in as a source. <br  />
</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> In Wwise, the audio input plugin is fed with audio from the microphone input of the PC. If no microphone is connected, it will be silent. </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="astruct_ak_channel_config_html"><div class="ttname"><a href="struct_ak_channel_config.html">AkChannelConfig</a></div><div class="ttdef"><b>Definition:</b> AkSpeakerConfig.h:496</div></div>
<div class="ttc" id="astruct_ak_channel_config_a4c0f4b3d39608a10c9b330c1ef8281a7_html_a4c0f4b3d39608a10c9b330c1ef8281a7"><div class="ttname">AkChannelConfig::SetStandard</div><div class="ttdeci">AkForceInline void SetStandard(AkUInt32 in_uChannelMask)</div><div class="ttdoc">Set channel config as a standard configuration specified with given channel mask.</div><div class="ttdef"><b>Definition:</b> AkSpeakerConfig.h:563</div></div>
<div class="ttc" id="a_ak_common_defs_8h_a27e63de612e818dbe8b87e583bc175e7_html_a27e63de612e818dbe8b87e583bc175e7"><div class="ttname">AK_INT</div><div class="ttdeci">const AkDataTypeID AK_INT</div><div class="ttdoc">Integer data type (uchar, short, and so on)</div><div class="ttdef"><b>Definition:</b> AkCommonDefs.h:49</div></div>
<div class="ttc" id="astruct_ak_audio_format_html"><div class="ttname"><a href="struct_ak_audio_format.html">AkAudioFormat</a></div><div class="ttdoc">Defines the parameters of an audio buffer format.</div><div class="ttdef"><b>Definition:</b> AkCommonDefs.h:62</div></div>
<div class="ttc" id="a_ak_common_defs_8h_a7fa3ccbf7577c429ea9612d9528350b8_html_a7fa3ccbf7577c429ea9612d9528350b8"><div class="ttname">AK_INTERLEAVED</div><div class="ttdeci">const AkDataInterleaveID AK_INTERLEAVED</div><div class="ttdoc">Interleaved data.</div><div class="ttdef"><b>Definition:</b> AkCommonDefs.h:52</div></div>
<div class="ttc" id="astruct_ak_audio_format_a9faddafaebebeb550993315c8f610aea_html_a9faddafaebebeb550993315c8f610aea"><div class="ttname">AkAudioFormat::SetAll</div><div class="ttdeci">void SetAll(AkUInt32 in_uSampleRate, AkChannelConfig in_channelConfig, AkUInt32 in_uBitsPerSample, AkUInt32 in_uBlockAlign, AkUInt32 in_uTypeID, AkUInt32 in_uInterleaveID)</div><div class="ttdef"><b>Definition:</b> AkCommonDefs.h:125</div></div>
</body>
</html>

