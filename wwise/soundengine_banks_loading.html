<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Loading Banks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Loading Banks </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>You control playback in the Wwise sound engine with Events and Game Syncs. These elements refer to internal sound structures stored in SoundBanks, which ultimately refer to loose media files. All of these must be loaded by the sound engine before using them.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> The use of PrepareEvent is incompatible with LoadBank, using in-memory data. </td></tr>
</table>
<h1><a class="anchor" id="soundengine_banks_loading_explicit_vs_implicit"></a>
Explicit Versus Implicit Media Loading</h1>
<p>You can load a SoundBank either implicitly or explicitly. Both approaches, detailed below, offer different option with implicit advantages and disadvantages that need to be evaluated for your particular scenario.</p>
<h2><a class="anchor" id="soundengine_banks_loading_explicit_vs_implicit_explicit"></a>
Explicit Bank Loading</h2>
<p>You can load a SoundBank explicitly by using one of the AK::SoundEngine::LoadBank() methods of the sound engine API. After a SoundBank is loaded, all the objects within it are ready to be used.</p>
<p>In the following example, the SoundBank BANK_01 is loaded explicitly. It is identified by an ID, which is defined in the Wwise_IDs.h header file. For a discussion on identifying SoundBanks using strings (Unicode or ANSI) or IDs, refer to Identifying Banks ). It contains the Event PLAY_SOUND_01, along with its associated sound structures and media (consult the Wwise Help for more information on generating SoundBanks with Wwise). When it is loaded, the Event is posted to the sound engine.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Wwise_IDs.h&quot;</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">AkGameObjectID gameObj = 3;</div>
<div class="line">AK::SoundEngine::RegisterGameObj( gameObj );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load a bank synchronously, using its ID.</span></div>
<div class="line">AkBankID returnedBankID;</div>
<div class="line">AKRESULT eResult = LoadBank(</div>
<div class="line">    AK::BANKS::BANK_01,         <span class="comment">// Identifier of the bank to be loaded.</span></div>
<div class="line">    returnedBankID              <span class="comment">// Returned bank ID.</span></div>
<div class="line">    );</div>
<div class="line"><span class="keywordflow">if</span>( eResult != AK_Success )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Failed loading bank.</span></div>
<div class="line">    <span class="comment">// Handle error...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load succeeded.</span></div>
<div class="line"><span class="comment">// Use the bank as required...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// For example, if the bank contained the event PLAY_SOUND_01, along with its</span></div>
<div class="line"><span class="comment">// associated sound structures and media.</span></div>
<div class="line">AK::SoundEngine::PostEvent(</div>
<div class="line">    AK::EVENTS::PLAY_SOUND_01,      <span class="comment">// Unique ID of the event</span></div>
<div class="line">    gameObj                         <span class="comment">// Associated game object ID</span></div>
<div class="line">    );</div>
</div><!-- fragment --><h2><a class="anchor" id="soundengine_banks_loading_explicit_vs_implicit_implicit"></a>
Implicit Media Loading</h2>
<p>The PrepareEvent/PrepareGameSync API allows for implicit loading of media that is not included in a SoundBank. In order to do this, you must first explicitly load a SoundBank that contains the definition of the Events and/or Game Syncs, through LoadBank(). Typically, these SoundBanks will contain only Events and structures, but no media, and thus be very lightweight. Refer to the Wwise Help to know how you can define a SoundBank that has no media data. When the referenced media is not included in the SoundBank, then it must be available as loose media files in the file system. After the definitions of Events and Game Syncs are loaded, you must then "prepare" them in order to use them (AK::SoundEngine::PrepareEvent() and AK::SoundEngine::PrepareGameSyncs()). When events or game syncs are prepared, then the sound engine will implicitly fetch the referenced media files from the file system. It is possible to include sound structures in a different SoundBank than the event definitions. The Event SoundBank will then contain a reference to the banks that contain the structures data, and the structures from the referenced SoundBank will be implicitly loaded along with the media when the Event is prepared. All contained structures will be loaded from the linked SoundBank and not just the ones that are referenced by the Event, and for this reason it is usually more practical to bundle the Events and structures in the same SoundBank.</p>
<p>In the following example, the bank BANK_02 is loaded explicitly and its referenced media is loaded implicitly. It contains the definition of the event PLAY_SOUND_02 and the related sound structures. Since it does not contain the event's associated media, posting the event will fail unless it is prepared first. Therefore, after loading the bank successfully, the event is prepared prior to posting. When an event is prepared, the sound engine will automatically load all the media required to post the event successfully.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Wwise_IDs.h&quot;</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">AkGameObjectID gameObj = 3;</div>
<div class="line">AK::SoundEngine::RegisterGameObj( gameObj );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load a bank synchronously, using its ID.</span></div>
<div class="line"><span class="comment">// This bank may contain only the definition of the events you wish to use.</span></div>
<div class="line">AkBankID returnedBankID;</div>
<div class="line">AKRESULT eResult = LoadBank(</div>
<div class="line">    AK::BANKS::BANK_02,         <span class="comment">// Identifier of the bank to load.</span></div>
<div class="line">    returnedBankID              <span class="comment">// Returned bank ID.</span></div>
<div class="line">    );</div>
<div class="line"><span class="keywordflow">if</span>( eResult != AK_Success )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Failed loading bank.</span></div>
<div class="line">    <span class="comment">// Handle error...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load succeeded. The definition of the event PLAY_SOUND_02 and its related structures are loaded.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// In order to post the event, it needs to be prepared (here, synchronously).</span></div>
<div class="line">AkUniqueID eventToPrepare = AK::EVENTS::PLAY_SOUND_02;</div>
<div class="line">eResult = PrepareEvent( </div>
<div class="line">    Preparation_Load,       <span class="comment">// Preparation type: load.</span></div>
<div class="line">    &amp;eventToPrepare,        <span class="comment">// Array of event IDs.</span></div>
<div class="line">    1                       <span class="comment">// Number of event IDs in the array.</span></div>
<div class="line">    );</div>
<div class="line"><span class="keywordflow">if</span> ( eResult != AK_Success )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Failed preparing event.</span></div>
<div class="line">    <span class="comment">// Handle error...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Prepare event succeeded: the sound engine has gathered all the media (and sound</span></div>
<div class="line"><span class="comment">// structures if necessary) that are required to successfully post the event, by loading all </span></div>
<div class="line"><span class="comment">// necessary media under the hood.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Post the event.</span></div>
<div class="line">AK::SoundEngine::PostEvent(</div>
<div class="line">    AK::EVENTS::PLAY_SOUND_02,      <span class="comment">// Unique ID of the event</span></div>
<div class="line">    gameObj                         <span class="comment">// Associated game object ID</span></div>
<div class="line">    );</div>
</div><!-- fragment --><p>To get a more complete example on how to use AK::SoundEngine::PrepareEvent and AK::SoundEngine::PrepareGameSyncs, refer to sections:</p><ul>
<li>Preparing Action Events</li>
<li>Preparing Events and Game Syncs (Switches and States)</li>
</ul>
<h1><a class="anchor" id="soundengine_banks_loading_sync_vs_async"></a>
Synchronous Versus Asynchronous Loading</h1>
<p>Bank loading is performed in a separate thread of the sound engine. All LoadBank(), PrepareEvent() and PrepareGameSyncs() functions of the main API are available through synchronous and asynchronous loading schemes.</p>
<h2><a class="anchor" id="soundengine_banks_loading_sync"></a>
Synchronous Bank Loading</h2>
<p>Synchronous AK::SoundEngine::LoadBank() functions are blocking functions. They return either when the bank is loaded, or if an error occurs.</p>
<h2><a class="anchor" id="soundengine_banks_loading_async"></a>
Asynchronous Bank Loading</h2>
<p>Asynchronous AK::SoundEngine::LoadBank() functions return immediately and the callback function is called after the requested action is completed, with a cookie as a parameter. When a call is asynchronous, error handling must be performed in the callback function.</p>
<p>The cookie parameter is optional and is available for your convenience. If you are not using it, just pass NULL. The sound engine will not use this pointer; it will simply return it with the callback function.</p>
<h2><a class="anchor" id="soundengine_banks_loading_callback"></a>
Bank Callback Prototype</h2>
<p>Callback functions used with asynchronous versions of LoadBank(), UnloadBank(), PrepareEvent() and PrepareGameSyncs() must follow this prototype:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> void( *AkBankCallbackFunc )(</div>
<div class="line">    AkBankID        in_bankID,</div>
<div class="line">    <span class="keywordtype">void</span> *          in_pInMemoryBankPtr,</div>
<div class="line">    AKRESULT        in_eLoadResult,</div>
<div class="line">    <span class="keywordtype">void</span> *          in_pCookie</div>
<div class="line">    );</div>
</div><!-- fragment --><p>You are responsible for implementing the callback function and, therefore, you must guarantee its validity.</p>
<p>The parameter in_bankID is not relevant when receiving callbacks for PrepareEvent and PrepareGameSync and should simply be ignored.</p>
<p>Refer to AkBankCallbackFunc for definitions of the parameters that are passed to the callback function.</p>
<h1><a class="anchor" id="soundengine_banks_loading_mem_vs_io"></a>
Loading Banks From Memory Or Through File I/O</h1>
<p>As said previously in Identifying Banks, you can either load banks from file on your side, then provide the appropriate overload of LoadBank() with a pointer and a size, or you specify a bank identifier (ID or string, see discussion above), and let the sound engine load the bank file through the Stream Manager.</p>
<h2><a class="anchor" id="soundengine_banks_loading_mem_vs_io_mem"></a>
Loading From Memory</h2>
<p>Use one of these prototypes of LoadBankMemoryView() to load a bank that's already in memory at its final location:</p>
<div class="fragment"><div class="line"><span class="comment">// Synchronous, in-place.</span></div>
<div class="line">AKRESULT LoadBankMemoryView(</div>
<div class="line">    <span class="keywordtype">void</span> *              in_pInMemoryBankPtr,    <span class="comment">///&lt; Pointer to the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkUInt32            in_uInMemoryBankSize,   <span class="comment">///&lt; Size of the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkBankID &amp;          out_bankID              <span class="comment">///&lt; Returned bank ID</span></div>
<div class="line"><span class="comment"></span>    );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Asynchronous, in-place.</span></div>
<div class="line">AKRESULT LoadBankMemoryView(</div>
<div class="line">    <span class="keywordtype">void</span> *              in_pInMemoryBankPtr,    <span class="comment">///&lt; Pointer to the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkUInt32            in_uInMemoryBankSize,   <span class="comment">///&lt; Size of the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkBankCallbackFunc  in_pfnBankCallback,     <span class="comment">///&lt; Callback function</span></div>
<div class="line"><span class="comment"></span>    <span class="keywordtype">void</span> *              in_pCookie,             <span class="comment">///&lt; Callback cookie</span></div>
<div class="line"><span class="comment"></span>    AkBankID &amp;          out_bankID              <span class="comment">///&lt; Returned bank ID</span></div>
<div class="line"><span class="comment"></span>    );</div>
</div><!-- fragment --><p>The memory is not copied inside the sound engine, therefore you must ensure that it remains valid until the bank is unloaded. Some alignment restrictions may apply based on the platform of the provided memory pointer to which the bank is loaded. On all platforms, the memory must be aligned on AK_BANK_PLATFORM_DATA_ALIGNMENT bytes. Some platforms may have different requirements, so you should check the platform specific SDK documentation.</p>
<p>Alternatively, use one of these prototypes of LoadBankMemoryCopy() to load a bank that's in memory in a temporary location:</p>
<div class="fragment"><div class="line"><span class="comment">// Synchronous, out-of-place.</span></div>
<div class="line">AKRESULT LoadBankMemoryCopy(</div>
<div class="line">    <span class="keywordtype">void</span> *              in_pInMemoryBankPtr,    <span class="comment">///&lt; Pointer to the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkUInt32            in_uInMemoryBankSize,   <span class="comment">///&lt; Size of the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkBankID &amp;          out_bankID              <span class="comment">///&lt; Returned bank ID</span></div>
<div class="line"><span class="comment"></span>    );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Asynchronous, out-of-place.</span></div>
<div class="line">AKRESULT LoadBankMemoryCopy(</div>
<div class="line">    <span class="keywordtype">void</span> *              in_pInMemoryBankPtr,    <span class="comment">///&lt; Pointer to the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkUInt32            in_uInMemoryBankSize,   <span class="comment">///&lt; Size of the in-memory bank to load</span></div>
<div class="line"><span class="comment"></span>    AkBankCallbackFunc  in_pfnBankCallback,     <span class="comment">///&lt; Callback function</span></div>
<div class="line"><span class="comment"></span>    <span class="keywordtype">void</span> *              in_pCookie,             <span class="comment">///&lt; Callback cookie</span></div>
<div class="line"><span class="comment"></span>    AkBankID &amp;          out_bankID              <span class="comment">///&lt; Returned bank ID</span></div>
<div class="line"><span class="comment"></span>    );</div>
</div><!-- fragment --><p>The bank will be copied into a new allocation made inside the sound engine, and the passed pointer can be freed immediately after the load operation is finished.</p>
<p>LoadBank() parses the bank ID stored in the first few bytes of the pointer that is provided, and returns it. Keep the bank ID to unload the bank later.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> If you choose to perform file I/O on your side, and feed the sound engine with pointers, then you must use explicit bank loading. Implicit bank loading can be unpredictable. Following a PrepareXXXX command, you can never be sure how many banks will be loaded or the memory requirements of these banks. This is why there are no in-memory versions of PrepareEvent and PrepareGameSyncs. </td></tr>
</table>
<h2><a class="anchor" id="soundengine_banks_loading_mem_vs_io_io"></a>
Loading Through File I/O</h2>
<p>The sound engine uses the Stream Manager whenever it needs to read from files. Refer to Identifying Banks for a discussion on bank identification and I/O.</p>
<p>You can use the AK::SoundEngine::SetBankLoadIOSettings() function to tweak the behavior of the sound engine's bank loader in regard to the Stream Manager. For more information on I/O, refer to the section <a class="el" href="streamingdevicemanager.html">Streaming / Stream Manager</a>.</p>
<h2><a class="anchor" id="soundengine_banks_loading_mem_vs_io_custompool"></a>
Memory Usage</h2>
<p>The sound engine parses banks' metadata and creates its objects in the sound engine's default pool.</p>
<p>In explicit LoadBank() functions that involve I/O, the media is read from disk and copied to memory. During I/O, the banks are read in chunks with a size specified by one of the sound engine initialization settings, AkInitSettings::uBankReadBufferSize. Larger values will issue fewer reads, or fewer sets of reads, at the cost of more memory during bank I/O.</p>
<h1><a class="anchor" id="soundengine_banks_loading_unloading"></a>
Unloading Banks</h1>
<p>There are many overloads of UnloadBank() to explicitly unload a bank:</p>
<ul>
<li>Using ID identification</li>
<li>Using string identification (Unicode or ANSI)</li>
<li>Synchronously</li>
<li>Asynchronously</li>
</ul>
<p>Likewise, use PrepareEvent() function with the Preparation_Unload flag to decrement the reference count of structures and media associated with these events. When the reference count of all objects within a bank that was loaded implicitly drops to 0, it is automatically unloaded.</p>
<p>Also, use PrepareGameSyncs() function with the Preparation_Unload flag to unload media that was loaded for prepared events that can play only when the specified game sync is selected. Note that the game syncs do not have a reference count and calling it once with the Preparation_Unload flag will immediately unload the unreferenced media.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> If a sound referenced by a bank is playing when that bank is unloaded, it will always stop if the bank contains its sound structure. There are chances that the sound will stop if the bank contained only the media, but other loaded banks have the media and sound structure. It will depend on whether the media was played from the data of the former or the latter. Refer to Duplicating Bank Contents. </td></tr>
</table>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> If events have been used to modify the parameters of this sound (such as a SetVolume event), this information will be removed. If a parameter has been changed using RTPCs, states, or switches, the parameter will be kept in memory and will be automatically applied if the SoundBank is reloaded. </td></tr>
</table>
<p>The following code loads and unloads a bank synchronously, using Unicode string identifiers and the default bank memory allocation. It also loads and unloads banks implicitly through PrepareEvent().</p>
<div class="fragment"><div class="line">AkBankID bankID;</div>
<div class="line">AKRESULT eResult = AK::SoundEngine::LoadBank( L<span class="stringliteral">&quot;Bank1.bnk&quot;</span>, bankID );</div>
<div class="line"><span class="keywordflow">if</span>( eResult != AK_Success )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Failed loading bank.</span></div>
<div class="line">    <span class="comment">// Handle error...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Bank load succeeded.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Prepare an event.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> * pszEvent = <span class="stringliteral">&quot;Event1&quot;</span>;</div>
<div class="line">eResult = PrepareEvent( Preparation_Load, &amp;pszEvent, 1 );</div>
<div class="line"><span class="keywordflow">if</span>( eResult != AK_Success )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Failed preparing event.</span></div>
<div class="line">    <span class="comment">// Handle error...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use the event and bank data...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Then, unprepare the event.</span></div>
<div class="line">eResult = PrepareEvent( Preparation_Unload, &amp;pszEvent, 1 );</div>
<div class="line"><span class="keywordflow">if</span>( eResult != AK_Success )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Failed unpreparing event.</span></div>
<div class="line">    <span class="comment">// Handle error...</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Unload the bank.</span></div>
<div class="line"><span class="comment">// Note: The bank is unloaded using the bank ID returned by LoadBank(). The call</span></div>
<div class="line"><span class="comment">// AK::SoundEngine::UnloadBank( L&quot;Bank1.bnk&quot;, NULL );</span></div>
<div class="line"><span class="comment">// works too: the sound engine internally converts the &quot;Bank1.bnk&quot; string into the bank ID.</span></div>
<div class="line">eResult = AK::SoundEngine::UnloadBank( bankID, NULL );</div>
<div class="line"><span class="keywordflow">if</span>( eResult != AK_Success )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Failed unloading bank.</span></div>
<div class="line">    <span class="comment">// Handle error...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="soundengine_banks_preparingbanks"></a>
Preparing Banks</h1>
<p>In addition to the LoadBank() and PrepareEvent() functions, it is also possible to prepare banks. You can prepare banks using either of the following methods:</p>
<ul>
<li>AkBankContent_All</li>
<li>AkBankContent_StructureOnly</li>
</ul>
<p>Both of these methods use the same PrepareBank mechanism with a slightly different implementation, however AkBankContent_All is used in the most common scenarios. .</p>
<h2><a class="anchor" id="soundengine_banks_AkBankContent_All"></a>
AkBankContent_All</h2>
<p>Preparing a bank using <code>AkBankContent_All</code> allows you to overcome some of the drawbacks of the LoadBank() mechanism, while taking advantage of the benefits of the PrepareEvent() mechanism. When using this method, the SoundBanks may still include all content types (events, structure data, and media files), but instead of loading the media files outright, this method loads all media into memory by using a mechanism similar to the prepare event mechanism. When loading media with PrepareBank(), Wwise first checks to see if a media file already exists in memory before loading it. This keeps memory usage at a minimum by avoiding any duplication of media files in memory.</p>
<p>AkBankContent_All is the default loading mechanism for PrepareBank() and will check the bank for media items to load. If media for a particular event does not exist in the bank, it can be loaded later from a loose file with a call to PrepareEvent().</p>
<h2><a class="anchor" id="soundengine_banks_AkBankContent_StructureOnly"></a>
AkBankContent_StructureOnly</h2>
<p>When using PrepareBank() with <code>AkBankContent_StructureOnly</code>, the events and structure metadata are loaded from a SoundBank, but the media items contained in the bank are ignored. Because PrepareEvent() must access media as loose files off disk and is unable to read files contained within a SoundBank, <code>AkBankContent_StructureOnly</code> is only useful if you also plan on loading the SoundBank using some other loading mechanism at some other time. In most scenarios where media will be loaded individually with PrepareEvent(), the media should not be included in the bank and the <code>AkBankContent_StructureOnly</code> flag will produce the same result as <code>AkBankContent_All</code>.</p>
<p>One example where the <code>AkBankContent_StructureOnly</code> flag may be useful is to implement multiple loading configurations. A game may have a "tool mode" that uses PrepareEvent() to load loose files on-demand and a "game mode" that uses LoadBank() to load the same bank in its entirety.</p>
<p>PrepareBank() can be called synchronously or asynchronously from the API, as desired. However, it is not advised to use both <code>AkBankContent_All</code> and <code>AkBankContent_StructureOnly</code> on the same bank because, once the media is loaded using <code>AkBankContent_All</code>, an unload will release everything - events, structure, and media.</p>
<h1><a class="anchor" id="soundengine_banks_clearing"></a>
Clearing Banks</h1>
<p>Calling the <code>AK::SoundEngine::ClearBanks()</code> function is useful when you want to reset the content of the sound engine. Note that you do not have to call <code>ClearBanks()</code> before calling <code>SoundEngine::Term()</code>. <code>ClearBanks</code> internally calls <code>AK::SoundEngine::ClearPreparedEvents</code>.</p>
<p>After this function is called:</p><ul>
<li>All sounds stop playing.</li>
<li>All banks are unloaded, including the initialization bank.</li>
<li>All State management information is cleared, because it was part of the initialization bank.</li>
</ul>
<h1><a class="anchor" id="soundengine_banks_clearing_prepared_events"></a>
Clearing Prepared Events</h1>
<p>Calling the AK::SoundEngine::ClearPreparedEvents() function will unprepare all Events that were prepared up to now, no matter how many times a single event has been prepared. <code>AK::SoundEngine::ClearPreparedEvents()</code> is internally called when calling <code>AK::SoundEngine::ClearBanks()</code>.</p>
<h1><a class="anchor" id="soundengine_banks_dup_contents"></a>
Duplicating Bank Contents</h1>
<p>Each bank can be loaded only once. If you try to explicitly load a bank a second time, it will result in a bank load error.</p>
<p>The Wwise sound engine allows you to have the same Events, sound structures, or media in two or more banks, and have them all loaded at the same time.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> For XMA and OpusNX, which do not support media relocation, if a sound that is common to several banks is being played, and the SoundBank from which it is being read is unloaded, this sound's playback will stop. There will be no transition to this sound's instance in one of the other loaded SoundBanks. </td></tr>
</table>
<p>When using <code>PrepareEvent</code>, media loaded will not be duplicated in memory if different events require the same media content to be loaded. Multiple Events can reference the same media object, and this media object will be unloaded only when all Events that reference it will be unprepared.</p>
<p>Using <code>LoadBank</code> along with <code>PrepareEvent</code> to load the same media content may cause media duplication because banks are loaded as an entity when using <code>LoadBank</code>.</p>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="soundengine_banks.html">Integration Details - Banks</a></li>
<li><a class="el" href="soundengine_banks_general.html">General Information</a></li>
<li><a class="el" href="sdk_bank_training.html">SoundBank Integration Samples</a></li>
<li>AK::SoundEngine::LoadBank()</li>
<li>AK::SoundEngine::UnloadBank()</li>
<li>AK::SoundEngine::ClearBanks()</li>
<li>AK::SoundEngine::PrepareEvent()</li>
<li>AK::SoundEngine::PrepareGameSyncs()</li>
<li>AK::SoundEngine::ClearPreparedEvents() </li>
</ul>
</dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a2e6ebb779470b43d78984c27f6a0c238_html_a2e6ebb779470b43d78984c27f6a0c238"><div class="ttname">AK::SoundEngine::PrepareEvent</div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT PrepareEvent(PreparationType in_PreparationType, const char **in_ppszString, AkUInt32 in_uNumEvent)</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a7e8069027779f518a2049dffbb8ecbcb_html_a7e8069027779f518a2049dffbb8ecbcb"><div class="ttname">AK::SoundEngine::LoadBankMemoryView</div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT LoadBankMemoryView(const void *in_pInMemoryBankPtr, AkUInt32 in_uInMemoryBankSize, AkBankID &amp;out_bankID)</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a352a1eb6955fa208062e40a9ccdd2560_html_a352a1eb6955fa208062e40a9ccdd2560"><div class="ttname">AkGameObjectID</div><div class="ttdeci">AkUInt64 AkGameObjectID</div><div class="ttdoc">Game object ID.</div><div class="ttdef"><b>Definition:</b> AkTypes.h:142</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a472a3d18cbb0c4f081b3b619e4a2f349_html_a472a3d18cbb0c4f081b3b619e4a2f349"><div class="ttname">AkBankID</div><div class="ttdeci">AkUInt32 AkBankID</div><div class="ttdoc">Run time bank ID.</div><div class="ttdef"><b>Definition:</b> AkTypes.h:157</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a64f7d1f79613cc4dcc49a4efba6caa63_html_a64f7d1f79613cc4dcc49a4efba6caa63"><div class="ttname">AKRESULT</div><div class="ttdeci">AKRESULT</div><div class="ttdoc">Standard function call result.</div><div class="ttdef"><b>Definition:</b> AkTypes.h:213</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a895ed0f83a0dea8fc284491c0ee0152c_html_a895ed0f83a0dea8fc284491c0ee0152c"><div class="ttname">AK::SoundEngine::RegisterGameObj</div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT RegisterGameObj(AkGameObjectID in_gameObjectID)</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a95f8f6841a618ec3d5e51a30a1614e13_html_a95f8f6841a618ec3d5e51a30a1614e13"><div class="ttname">AK::SoundEngine::LoadBank</div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT LoadBank(const char *in_pszString, AkBankID &amp;out_bankID, AkBankType in_bankType=AkBankType_User)</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a21e0dbb1f9aebfc22fdd88634dc1067b_html_a21e0dbb1f9aebfc22fdd88634dc1067ba37375e4d359e99b67d0a69f4a5714b92"><div class="ttname">AK::SoundEngine::Preparation_Unload</div><div class="ttdeci">@ Preparation_Unload</div><div class="ttdoc">PrepareEvent() will unload required information to play the specified event.</div><div class="ttdef"><b>Definition:</b> AkSoundEngine.h:2642</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname">NULL</div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> AkTypes.h:46</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a64f7d1f79613cc4dcc49a4efba6caa63_html_a64f7d1f79613cc4dcc49a4efba6caa63ad7c47fea3da641e7422573c6a13dc35e"><div class="ttname">AK_Success</div><div class="ttdeci">@ AK_Success</div><div class="ttdoc">The operation was successful.</div><div class="ttdef"><b>Definition:</b> AkTypes.h:215</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a8341fa4d01d2fa852c3cc410401b04dc_html_a8341fa4d01d2fa852c3cc410401b04dc"><div class="ttname">AkUniqueID</div><div class="ttdeci">AkUInt32 AkUniqueID</div><div class="ttdoc">Unique 32-bit ID.</div><div class="ttdef"><b>Definition:</b> AkTypes.h:134</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a21e0dbb1f9aebfc22fdd88634dc1067b_html_a21e0dbb1f9aebfc22fdd88634dc1067ba7bb39cc6dfafe005cddfbf12c0d62ad0"><div class="ttname">AK::SoundEngine::Preparation_Load</div><div class="ttdeci">@ Preparation_Load</div><div class="ttdoc">PrepareEvent() will load required information to play the specified event.</div><div class="ttdef"><b>Definition:</b> AkSoundEngine.h:2641</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_ac91406bc2fe061e4248cb448207b5a64_html_ac91406bc2fe061e4248cb448207b5a64"><div class="ttname">AK::SoundEngine::UnloadBank</div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT UnloadBank(const char *in_pszString, const void *in_pInMemoryBankPtr, AkBankType in_bankType=AkBankType_User)</div></div>
<div class="ttc" id="a_ak_callback_8h_a67b14fac605177de15900de12ad43021_html_a67b14fac605177de15900de12ad43021"><div class="ttname">AkBankCallbackFunc</div><div class="ttdeci">void(* AkBankCallbackFunc)(AkUInt32 in_bankID, const void *in_pInMemoryBankPtr, AKRESULT in_eLoadResult, void *in_pCookie)</div><div class="ttdef"><b>Definition:</b> AkCallback.h:326</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_ac16591355aef3ffaf2f8e9ac7a5b95ad_html_ac16591355aef3ffaf2f8e9ac7a5b95ad"><div class="ttname">AK::SoundEngine::LoadBankMemoryCopy</div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT LoadBankMemoryCopy(const void *in_pInMemoryBankPtr, AkUInt32 in_uInMemoryBankSize, AkBankID &amp;out_bankID)</div></div>
<div class="ttc" id="a_ak_numeral_types_8h_a39c6c5d577901802ca77775760b704ce_html_a39c6c5d577901802ca77775760b704ce"><div class="ttname">AkUInt32</div><div class="ttdeci">uint32_t AkUInt32</div><div class="ttdoc">Unsigned 32-bit integer.</div><div class="ttdef"><b>Definition:</b> AkNumeralTypes.h:38</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a41e9ef8d42951871fe4a8ae58a29a68e_html_a41e9ef8d42951871fe4a8ae58a29a68e"><div class="ttname">AK::SoundEngine::PostEvent</div><div class="ttdeci">AKSOUNDENGINE_API AkPlayingID PostEvent(AkUniqueID in_eventID, AkGameObjectID in_gameObjectID, AkUInt32 in_uFlags=0, AkCallbackFunc in_pfnCallback=NULL, void *in_pCookie=NULL, AkUInt32 in_cExternals=0, AkExternalSourceInfo *in_pExternalSources=NULL, AkPlayingID in_PlayingID=AK_INVALID_PLAYING_ID)</div></div>
</body>
</html>

