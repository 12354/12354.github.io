<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rooms and Portals Setup in Wwise</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Rooms and Portals Setup in Wwise </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="spatial_audio_roomsportals_wwisesetupemitters"></a>
Setting Up a Sound in Wwise</h1>
<p>In order to use room reverb on emitter game objects, you need to enable the <b>Use game-defined auxiliary sends</b> check box in the Wwise Authoring tool. The send to the room is applied by Spatial Audio, in addition to any game-defined sends that are requested by the game.</p>
<h1><a class="anchor" id="spatial_audio_roomsportals_using3dreverbs"></a>
Setting Up a Room Auxiliary Bus in Wwise</h1>
<p>Room busses need to be created with the correct positioning options, that is, <b>Listener Relative Routing</b> enabled, 3D Spatialization set to "Position And Orientation", and <b>Use game-defined auxiliary sends</b> enabled. Alternatively, you could create a bus with Preset <b>Room Auxiliary Bus</b>.</p>
<p>The Auxiliary Bus design used with Spatial Audio Rooms and Portals is not fundamentally different than in the traditional modeling of environments. It requires that an Auxiliary Bus be assigned for each Room, mounted with the reverb Effect of the designer's choice, and it is the same bus that is used whether the listener is inside or outside the Room. The only difference is that it should be made 3D by enabling Listener Relative Routing (in the Positioning tab) and setting the 3D Spatialization to either Position + Orientation or Position, as shown in the figure below. This way, Spatial Audio may spatialize the reverberation of adjacent Rooms at the location of their Portal by acting on the Rooms' underlying game object position and Spread.</p>
<div class="image">
<img src="set_positioning_to_3D.png" alt=""/>
</div>
<p>The Room's reference orientation is defined in the room settings (<code>AkRoomParams::Up</code> and <code>AkRoomParams::Front</code>), and never changes. The corresponding game object's orientation is made equal to the Room's orientation. When the listener is in a Room, the bus's Spread is set to 100 (360 degrees) by Spatial Audio. Thanks to 3D positioning, the output of the reverb is rotated and panned into the parent bus based on the relative orientation of the listener and the Room. This happens because the Auxiliary Bus is tied to the Room's game object, while its parent bus is tied to the listener. The screenshot below shows an emitter, the radio, sending to the Auxiliary Bus <em>Mezzanine2</em>. You can see that a separate game object has been created for this room, <em>Ak_RV_Mezzanine</em>, that is neither the Radio nor the listener (<em>PlayerCameraManager_0</em>).</p>
<div class="image">
<img src="voices_graph.png" alt=""/>
</div>
<p>If, for example, there is a spatialized early reflection pattern "baked" into the reverb (such patterns exist explicitly in the RoomVerb's ER section, and implicitly in multichannel IR recordings used in the AK Convolution Reverb), then they will be tied to the Room instead of following the listener as it turns around. This is desirable for proper immersion. On the other hand, it is preferable to favor configurations that "rotate well". Ambisonic configurations are invariant to rotation, so they are favorable. Standard configurations (4.0, 5.1, and so on), less so. When using standard configurations, it is better to opt for those without a center channel, to use identical configurations for aux busses and their parent, and to set a Focus to 100. In these conditions, with a 4.0 reverb oriented with the Room towards the north, a listener looking at the north would hear the reverb exactly as if it were assigned to speakers directly. A listener looking straight east, west, or south would hear the original reverb but with channels swapped. Finally, a listener looking anywhere in between would hear each channel of the original reverb being mixed into a pair of output channels.</p>
<p>When the listener is away from a room's Portal, Spatial Audio reduces the spread according to the Portal's extent, which seamlessly contracts the reverb's output to a point source as it gets farther away. The Spread is set to 50 (180 degrees) when the listener is midway into the Portal. And, as it penetrates into the room, the Spread is increased even more with the "opening" being carefully kept towards the direction of the nearest Portal.</p>
<p>When mixing sounds into portals, Spatial Audio calculates the distance of the entire path length between the sound source and the listener. This distance is applied to the attenuation curve of each sound before mixing the sound into the room bus so that the relative volumes of sounds with different attenuations are preserved. An additional attenuation applied directly to the room bus has no effect.</p>
<p>The Room game object position is maintained by Spatial Audio, and when the listener is inside a room, at the game object is placed at the same location as the listener. In this case, the attenuation curves, if assigned, are all evaluated at distance 0.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> Diffraction, Transmission Loss, Occlusion, and Obstruction for room reverb are applied at the Emitter-Room connection, using the attenuation curves of the source sound. Assigning an attenuation to a Room Auxiliary Bus has no effect.</td></tr>
</table>
<h1><a class="anchor" id="spatial_audio_roomsportals_coupling"></a>
Coupling Rooms</h1>
<p>Room coupling (see Room Coupling) is achieved by 'chaining' room busses. To allow this, make sure that the <b>Enable Game-Defined Sends</b> check box is enabled on Room Auxiliary Busses. This allows a Room to also send to the reverb of the listener's Room (or the next room in the path). A sound's Game-Defined Auxiliary Send volume and attenuation curve controls how much of each sound is mixed into the first bus of a room reverb chain, and the Game-Defined Auxiliary Send volume of each Room determines how much is sent to the next room in the chain. It affects how much acoustic energy is transferred to adjacent rooms via portals.</p>
<p>An emitter that has the <b>Enable Game-Defined Sends</b> check box selected sends to its own room's bus as well as all adjacent rooms that have active paths back to the listener. The relative send levels for each room represent the amount of acoustic energy that propagates to adjacent rooms through portals, and how much remains in the emitter's room. All of the portals connected to the emitter's room are included in this ratio calculation even if there is no active connection to the Room Auxiliary Bus opposite that portal.</p>
<h1><a class="anchor" id="spatial_audio_roomsportals_roomtonesinwwise"></a>
Setting Up a Room Tone in Wwise</h1>
<p>A sound that is to be used as a room tone should have most of the same settings as a room Auxiliary Bus (refer to Setting Up a Room Auxiliary Bus in Wwise), in the Positioning tab of the Property Editor in Wwise. <br  />
</p>
<p>The setup of a room tone is similar to the setup of a room Auxiliary Bus. In both cases:</p><ul>
<li><b>Listener Relative Routing</b> is enabled.</li>
<li><b>3D Spatialization</b> is set to <b>Position + Orientation</b>.</li>
<li><b>3D Position</b> is set to <b>Emitter</b>.</li>
<li><b>Use game-defined aux sends</b> is enabled if it is desired for the room tone to excite the reverb of the room (if configured to do so, see Posting Events on Room Game Objects) and adjoining rooms.</li>
</ul>
<p>There is one distinction between the two setups:</p><ul>
<li>A room tone will likely have a unique Attenuation ShareSet, whereas a room Auxiliary Bus will not have an attenuation defined (a room bus will instead use the Auxiliary Send Volume curve of the sound playing on the emitter Game Object). Keep in mind the positioning behavior of the Room Game Object when designing this curve: the distance evaluated will be zero when the listener is inside the room, or exactly at a connected portal, and will increase as the listener moves away from the portal. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

