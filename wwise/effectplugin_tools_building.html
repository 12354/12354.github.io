<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Building Your Project for the Different Wwise Platforms</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Building Your Project for the Different Wwise Platforms </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="effectplugin_tools_building_target"></a>
Building your Plug-in</h1>
<p>The <code>build</code> command will use the solutions previously generated (refer to <a class="el" href="effectplugin_tools_premakeconfig.html">Configuring Your Project With Premake</a> if there is no solution in the project folder) to compile the plug-in and copy the binary files to the Wwise installation. This command must be called from within the project folder and needs a few arguments in order to do its job properly. Here is a typical build command:</p>
<div class="fragment"><div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build -c Release -x x64 -t vc160 Authoring</div>
</div><!-- fragment --><p>This will build the project in release mode (<code>-c</code> flag), targeting the architecture x64 (<code>-x</code> flag) and MSVC toolset vc160 (<code>-t</code> flag), for the platform Authoring on the current operating system. Consult the help of the <code>build</code> command for more details about the possible values of its arguments.</p>
<div class="fragment"><div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build -h</div>
</div><!-- fragment --><p>The binaries will output directly to your Wwise installation and will be ready for testing:</p><ul>
<li>For the SoundEngine plug-in part, go to "%WWISEROOT%/SDK/&lt;Platform&gt;/&lt;Config&gt;/{bin,lib}".</li>
<li>For the Authoring plug-in part on Windows, go to "%WWISEROOT%/Authoring/x64/&lt;Config&gt;/bin/Plugins".</li>
<li>For the Authoring plug-in part on macOS, go to "%WWISEROOT%/Authoring/macosx_gmake/&lt;Config&gt;/bin/Plugins".</li>
<li>For the Authoring plug-in part on Linux, go to "%WWISEROOT%/Authoring/linux_gmake/&lt;Config&gt;/bin/Plugins".</li>
<li>For the Documentation plug-in part, go to "%WWISEROOT%/Authoring/Data/Plugins/&lt;PluginName&gt;/Html".</li>
</ul>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><p class="starttd"><b>Note:</b> Some platforms build the plug-in for multiple toolchain versions during execution of the <code>build</code> command, including setting up unique environment variables for each project build invocation. For each supported platform, the "%WWISEROOT%\Scripts\ToolchainSetup\&lt;Platform&gt;" directory, if it exists, contains two files:</p><ul>
<li>ToolchainVers.txt, which specifies the list of supported toolchain versions for the platform</li>
<li>GetToolchainEnv.py, which determines the environment variables to be applied during the build process, given one of the values in ToolchainVers.txt as an argument</li>
</ul>
<p class="intertd">If desired, it is also possible to override either of these when executing the build command in wp.py, by specifying "--toolchain-vers {file}" or "--toolchain-env-script {file}" on the command line. This may be desired if you want to maintain your own build structure, or publish your plug-in for toolchains separate from the Wwise SDK.</p>
<p class="endtd">The projects generated by wp.py also automatically adjust the build output folder for the toolchain version that the project is compiled against, based on the defined environment. For more information on how this is determined for each platform, refer to the corresponding Platform-Specific Information page, which describes this in further detail. </p>
</td></tr>
</table>
<h1><a class="anchor" id="effectplugin_tools_adding_target"></a>
Adding a Target Platform</h1>
<p>Target platforms can be added at any point during the development of your plug-in. This is done by premaking and building a platform. You will at least want to build one platform and, if you build for <code>Authoring</code>, you'll probably also want to build the <code>Documentation</code>. This will install the documentation for the plug-in properties, which is shown in the <b>Property</b> <b>Help</b> panel when a property is selected.</p>
<p>For example, run the following in a command-line to premake and build the Windows_vc160 and Authoring platforms: </p><div class="fragment"><div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; premake Windows_vc160</div>
<div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; premake Authoring</div>
<div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build Windows_vc160 -c Release -x x64</div>
<div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build Authoring -c Release -x x64 -t vc160</div>
<div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build Documentation</div>
</div><!-- fragment --><h1><a class="anchor" id="effectplugin_tools_buildhooks"></a>
Executing Post-Build Actions Using Hooks</h1>
<p>It is common to want to execute custom actions after building a specific target. This can be achieved by adding the <code>&ndash;build-hooks-file</code> flag to the <code>build</code> command and specifying a Python file. This file must be created by the User and is not part of the initial skeleton generated by the <code>new</code> command. For example, this illustrates the content of a post-build hook file:</p>
<div class="fragment"><div class="line"><span class="comment"># build_hooks.py</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Defines a postbuild hook, this is the function that gets called by the plug-in</span></div>
<div class="line"><span class="comment"># development tools every time a target is successfully built</span></div>
<div class="line"><span class="keyword">def </span>postbuild(**kwargs):</div>
<div class="line">    WWISE_ROOT = kwargs.get(<span class="stringliteral">&quot;wwise_root&quot;</span>) <span class="comment"># Absolute path to the root of the Wwise installation</span></div>
<div class="line">    PROJECT_ROOT = kwargs.get(<span class="stringliteral">&quot;project_root&quot;</span>) <span class="comment"># Absolute path to the root of the plug-in directory</span></div>
<div class="line"> </div>
<div class="line">    platform = kwargs.get(<span class="stringliteral">&quot;platform&quot;</span>) <span class="comment"># Name of the platform that was built (Authoring, Windows_vc140, etc.)</span></div>
<div class="line">    arch = kwargs.get(<span class="stringliteral">&quot;arch&quot;</span>) <span class="comment"># The architecture that was built (Win32_vc140, x64_vc140, etc.)</span></div>
<div class="line">    config = kwargs.get(<span class="stringliteral">&quot;config&quot;</span>) <span class="comment"># The configuration that was built (Debug, Profile, Release)</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Put your code here</span></div>
<div class="line">    <span class="comment"># ...</span></div>
</div><!-- fragment --><p>This example calls a post-build hook for the Windows_vc160 and Authoring platforms: </p><div class="fragment"><div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build Windows_vc160 -c Release -x x64 --build-hooks-file=build_hooks.py</div>
<div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build Authoring -c Release -x x64 -t vc160 --build-hooks-file=build_hooks.py</div>
<div class="line">python &quot;%WWISEROOT%/Scripts/Build/Plugins/wp.py&quot; build Documentation</div>
</div><!-- fragment --><p>The <b>build_hooks.py</b> file must be located at the root of the plug-in directory. <br  />
</p>
<p>Another example copies a DLL file "library.dll" from the plug-in directory to the Wwise installation: </p><div class="fragment"><div class="line"><span class="keyword">import</span> os</div>
<div class="line"><span class="keyword">import</span> shutil</div>
<div class="line"><span class="keyword">import</span> sys</div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>postbuild(**kwargs):</div>
<div class="line">    WWISE_ROOT = kwargs.get(<span class="stringliteral">&quot;wwise_root&quot;</span>)</div>
<div class="line">    PROJECT_ROOT = kwargs.get(<span class="stringliteral">&quot;project_root&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    platform = kwargs.get(<span class="stringliteral">&quot;platform&quot;</span>)</div>
<div class="line">    arch = kwargs.get(<span class="stringliteral">&quot;arch&quot;</span>)</div>
<div class="line">    config = kwargs.get(<span class="stringliteral">&quot;config&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Build a multimap of destination folders =&gt; files to copy</span></div>
<div class="line">    platform_files = {}</div>
<div class="line">    <span class="keywordflow">if</span> platform == <span class="stringliteral">&quot;Authoring_Windows&quot;</span>:</div>
<div class="line">        platform_files[<span class="stringliteral">&quot;Authoring/x64/{}/bin/plugins&quot;</span>.format(config)] = [</div>
<div class="line">            <span class="stringliteral">&quot;Prebuilt/x64/{}/library.dll&quot;</span>.format(config)</div>
<div class="line">        ]</div>
<div class="line">    <span class="keywordflow">elif</span> platform == <span class="stringliteral">&quot;Windows_vc160&quot;</span>:</div>
<div class="line">        platform_files[<span class="stringliteral">&quot;SDK/{}/{}/bin&quot;</span>.format(arch, config)] = [</div>
<div class="line">            <span class="stringliteral">&quot;Prebuilt/{}/{}/library.dll&quot;</span>.format(arch, config)</div>
<div class="line">        ]</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Copy all of the file to their destination</span></div>
<div class="line">    <span class="keywordflow">for</span> dest, files <span class="keywordflow">in</span> platform_files.items():</div>
<div class="line">        dest = os.path.join(WWISE_ROOT, dest)</div>
<div class="line">        <span class="keywordflow">for</span> file <span class="keywordflow">in</span> files:</div>
<div class="line">            file = os.path.join(PROJECT_ROOT, file)</div>
<div class="line">            <span class="keywordflow">try</span>:</div>
<div class="line">                shutil.copy(file, dest)</div>
<div class="line">                print(<span class="stringliteral">&quot;POSTBUILD HOOK: Copied {} to {}&quot;</span>.format(file, dest))</div>
<div class="line">            <span class="keywordflow">except</span> IOError:</div>
<div class="line">                sys.stderr.write(<span class="stringliteral">&quot;POSTBUILD HOOK: Failed to copy {} to {}\n&quot;</span>.format(file, dest))</div>
</div><!-- fragment --><p>The last step to perform, when the development of the plug-in is finished, is to package the project in a format ready to install by the Audiokinetic Launcher. Refer to <a class="el" href="effectplugin_tools_packaging.html">Packaging Your Plug-in for the Audiokinetic Launcher</a> for more details.</p>
<p>Next section: <a class="el" href="effectplugin_tools_packaging.html">Packaging Your Plug-in for the Audiokinetic Launcher</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

