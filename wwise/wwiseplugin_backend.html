<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Backend of an Authoring Plug-in</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Backend of an Authoring Plug-in </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To create the backend for your plug-in, you need to create a class derived from <code><a class="el" href="namespace_a_k_1_1_wwise_1_1_plugin_a989b8417cedde33d928b90171491fcc5.html#a989b8417cedde33d928b90171491fcc5" title="Latest version of the C++ AudioPlugin interface.">AK::Wwise::Plugin::AudioPlugin</a></code>. This base class offers the most basic methods for a Wwise Authoring plug-in, including a function to write to a SoundBank.</p>
<p>The main model for your plug-in is the <a class="el" href="plugin_backend_model.html#wwiseplugin_propertyset">Property Set</a>, but <a class="el" href="plugin_backend_model.html#wwiseplugin_complexproperty">Custom Data</a> can also be managed by the plug-in backend.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_plugin_8h.html">AK/Wwise/Plugin.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>BackendSourcePlugin</div>
<div class="line">:   <span class="keyword">public</span> <a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin.html">AK::Wwise::Plugin::AudioPlugin</a></div>
<div class="line">,   <span class="keyword">public</span> <a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_source.html">AK::Wwise::Plugin::Source</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// AK::Wwise::Plugin::AudioPlugin</span></div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin_ae59a3955718ed3bbde0521da21cd8539.html#ae59a3955718ed3bbde0521da21cd8539">GetBankParameters</a>(</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="struct_g_u_i_d.html">GUID</a>&amp; in_guidPlatform,</div>
<div class="line">        <a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer.html">AK::Wwise::Plugin::DataWriter</a>&amp; in_dataWriter</div>
<div class="line">    ) <span class="keyword">const override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// AK::Wwise::Plugin::Source</span></div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_source_acecbec655a9c34630b5b5c8efb29fe1d.html#acecbec655a9c34630b5b5c8efb29fe1d">GetSourceDuration</a>(</div>
<div class="line">        <span class="keywordtype">double</span>&amp; out_dblMinDuration,</div>
<div class="line">        <span class="keywordtype">double</span>&amp; out_dblMaxDuration</div>
<div class="line">    ) <span class="keyword">const override</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><a class="code" href="_plugin_info_generator_8h_ae72bc9efe38504b8f47686c01f5882f8.html#ae72bc9efe38504b8f47686c01f5882f8">AK_ADD_PLUGIN_CLASS_TO_CONTAINER</a>(</div>
<div class="line">    MyPlugin,               <span class="comment">// Add to container &quot;MyPlugin&quot;</span></div>
<div class="line">    BackendSourcePlugin,    <span class="comment">// Class to add to the container</span></div>
<div class="line">    SoundEngineSourcePlugin <span class="comment">// Sound engine plug-in to which this plug-in corresponds</span></div>
<div class="line">);</div>
</div><!-- fragment --><h1><a class="anchor" id="wwiseplugin_bank"></a>
Generating SoundBanks</h1>
<p>You must code your plug-in to store its current settings into banks when requested. You can do this by implementing the <code><a class="el" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin_ae59a3955718ed3bbde0521da21cd8539.html#ae59a3955718ed3bbde0521da21cd8539" title="Obtains parameters that will be written to a bank.">AK::Wwise::Plugin::AudioPlugin::GetBankParameters()</a></code> method.</p>
<p>The parameters are written into the SoundBank as a data block. The block is then loaded directly from the SoundBank into your sound engine plug-in's parameter structure. Therefore, you must write the parameters in the same order they are declared in the parameter structure of your sound engine plug-in. For more information, refer to <a class="el" href="soundengine_plugins.html#shared_parameter_interface">Parameter Node Interface Implementation</a>.</p>
<p>For example, consider the following parameter structure:</p>
<div class="fragment"><div class="line"><span class="comment">// Parameter structure for this effect.</span></div>
<div class="line"><span class="keyword">struct </span>AkFXSrcSineParams</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98.html#afc38459f26e2b23defe588026e886a98">AkReal32</a>     fFrequency;     <span class="comment">// Frequency (in Hertz).</span></div>
<div class="line">    <a class="code" href="_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98.html#afc38459f26e2b23defe588026e886a98">AkReal32</a>     fGain;          <span class="comment">// Gain (in dBFS).</span></div>
<div class="line">    <a class="code" href="_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98.html#afc38459f26e2b23defe588026e886a98">AkReal32</a>     fDuration;      <span class="comment">// Sustain duration (only valid if finite).</span></div>
<div class="line">};</div>
</div><!-- fragment --><p>The following implementation of <code><a class="el" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin_ae59a3955718ed3bbde0521da21cd8539.html#ae59a3955718ed3bbde0521da21cd8539" title="Obtains parameters that will be written to a bank.">AK::Wwise::Plugin::AudioPlugin::GetBankParameters()</a></code> gets the current value of each property and then uses the appropriate method to write the value with the <code><a class="el" href="namespace_a_k_1_1_wwise_1_1_plugin_a32526a23215a4452f561220b527e12f8.html#a32526a23215a4452f561220b527e12f8" title="Latest version of the C++ DataWriter interface.">AK::Wwise::Plugin::DataWriter</a></code> object received as a parameter. These actions are performed in the same order in which the members are defined in your parameter structure.</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> MySourcePlugin::GetBankParameters(</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="struct_g_u_i_d.html">GUID</a>&amp; in_guidPlatform,</div>
<div class="line">    <a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer.html">AK::Wwise::Plugin::DataWriter</a>&amp; in_dataWriter)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line">    result &amp;= in_dataWriter.<a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer_a8d9b58e2ecba7f95721d4b89b7f9630f.html#a8d9b58e2ecba7f95721d4b89b7f9630f">WriteReal32</a>(m_propertySet-&gt;GetReal32(in_guidPlatform, <span class="stringliteral">&quot;Frequency&quot;</span>));</div>
<div class="line">    result &amp;= in_dataWriter.<a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer_a8d9b58e2ecba7f95721d4b89b7f9630f.html#a8d9b58e2ecba7f95721d4b89b7f9630f">WriteReal32</a>(m_propertySet-&gt;GetReal32(in_guidPlatform, <span class="stringliteral">&quot;Gain&quot;</span>));</div>
<div class="line">    result &amp;= in_dataWriter.<a class="code" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer_a8d9b58e2ecba7f95721d4b89b7f9630f.html#a8d9b58e2ecba7f95721d4b89b7f9630f">WriteReal32</a>(m_propertySet-&gt;GetReal32(in_guidPlatform, <span class="stringliteral">&quot;Duration&quot;</span>));</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --><table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> To get the current value of a property, use the getter functions provided by <code><a class="el" href="namespace_a_k_1_1_wwise_1_1_plugin_a60b30ae555221c9d10a17f4edf2d2456.html#a60b30ae555221c9d10a17f4edf2d2456" title="Latest version of the C++ PropertySet interface.">AK::Wwise::Plugin::PropertySet</a></code>. The type requested must exactly match the type specified in the XML. </td></tr>
</table>
<p>For more information about available methods for writing different types of data, refer to <a class="el" href="namespace_a_k_1_1_wwise_1_1_plugin_a32526a23215a4452f561220b527e12f8.html#a32526a23215a4452f561220b527e12f8">AK::Wwise::Plugin::DataWriter</a>.</p>
<h1><a class="anchor" id="wwiseplugin_dll_license"></a>
Managing Licenses</h1>
<p>During SoundBank generation, Wwise queries the plug-ins for the license status they implement with the <code><a class="el" href="namespace_a_k_1_1_wwise_1_1_plugin_a44e186a822b15e2230c95b695b01c101.html#a44e186a822b15e2230c95b695b01c101" title="Latest version of the C++ License interface.">AK::Wwise::Plugin::License</a></code> interface. The plug-in can implement <code><a class="el" href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_license_a33cea73844b7198f466ddfd911b4bc59.html#a33cea73844b7198f466ddfd911b4bc59" title="Retrieve the licensing status of the plug-in for the given platform.">AK::Wwise::Plugin::License::GetLicenseStatus</a></code> to return one of the enumerated values in <code><a class="el" href="namespace_a_k_1_1_wwise_1_1_plugin_a74c80204b884826c56e3d208bd3d1df4.html#a74c80204b884826c56e3d208bd3d1df4" title="License status.">AK::Wwise::Plugin::LicenseStatus</a></code>. Additionally, the plug-in can return a message with an associated severity, to be shown in the SoundBank generation log.</p>
<p>Returning <code>LicenseStatus_Unlicensed</code> or <code>LicenseStatus_Expired</code> will prevent the plug-in from being included in a SoundBank.</p>
<p>Plug-ins can implement their own schemes for license validation. Please note that you should never query a server synchronously in this function. The function needs to return an answer immediately.</p>
<p>If your plug-in is registered with Audiokinetic, you can leverage the license system of Wwise. Use the following implementation, which looks up the license status in the Wwise Project License:</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_a_k_1_1_wwise_1_1_plugin_a74c80204b884826c56e3d208bd3d1df4.html#a74c80204b884826c56e3d208bd3d1df4">AK::Wwise::Plugin::LicenseStatus</a> MyPlugin::GetLicenseStatus(</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="struct_g_u_i_d.html">GUID</a>&amp; in_guidPlatform,</div>
<div class="line">    <a class="code" href="namespace_a_k_1_1_wwise_1_1_plugin_a9c61cf9f6b1cb69de3722982150b67ed.html#a9c61cf9f6b1cb69de3722982150b67ed">AK::Wwise::Plugin::Severity</a>&amp; out_eSeverity,</div>
<div class="line">    <span class="keywordtype">char</span>* out_pszMessage,</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> in_uiBufferSize)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="namespace_a_k_1_1_wwise_1_1_plugin_a58ce97270e1033ca4f52b145c8fd21eb.html#a58ce97270e1033ca4f52b145c8fd21eb">AK::Wwise::Plugin::LicenseType</a> eType;</div>
<div class="line">    <a class="code" href="namespace_a_k_1_1_wwise_1_1_plugin_a74c80204b884826c56e3d208bd3d1df4.html#a74c80204b884826c56e3d208bd3d1df4">AK::Wwise::Plugin::LicenseStatus</a> eStatus;</div>
<div class="line">    uint32_t uDaysToExpiry;</div>
<div class="line"> </div>
<div class="line">    m_host.GetLicenseStatus(in_guidPlatform, eType, eStatus, uDaysToExpiry);</div>
<div class="line">    <span class="keywordflow">return</span> eStatus;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="a_plugin_8h_html"><div class="ttname"><a href="_plugin_8h.html">Plugin.h</a></div><div class="ttdoc">Wwise Authoring Plug-ins - Main include file.</div></div>
<div class="ttc" id="aclass_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer_html"><div class="ttname"><a href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer.html">AK.Wwise::Plugin::V1::DataWriter</a></div><div class="ttdoc">Interface used to write data during sound bank generation.</div><div class="ttdef"><b>Definition:</b> <a href="_host_data_writer_8h_source.html#l00244">HostDataWriter.h:245</a></div></div>
<div class="ttc" id="aclass_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer_a8d9b58e2ecba7f95721d4b89b7f9630f_html_a8d9b58e2ecba7f95721d4b89b7f9630f"><div class="ttname"><a href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_data_writer_a8d9b58e2ecba7f95721d4b89b7f9630f.html#a8d9b58e2ecba7f95721d4b89b7f9630f">AK.Wwise::Plugin::V1::DataWriter::WriteReal32</a></div><div class="ttdeci">bool WriteReal32(float in_value)</div><div class="ttdoc">Writes a 32-bit, single-precision floating point value.</div><div class="ttdef"><b>Definition:</b> <a href="_host_data_writer_8h_source.html#l00427">HostDataWriter.h:427</a></div></div>
<div class="ttc" id="a_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98_html_afc38459f26e2b23defe588026e886a98"><div class="ttname"><a href="_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98.html#afc38459f26e2b23defe588026e886a98">AkReal32</a></div><div class="ttdeci">float AkReal32</div><div class="ttdoc">32-bit floating point</div><div class="ttdef"><b>Definition:</b> <a href="_ak_numeral_types_8h_source.html#l00046">AkNumeralTypes.h:46</a></div></div>
<div class="ttc" id="anamespace_a_k_1_1_wwise_1_1_plugin_a58ce97270e1033ca4f52b145c8fd21eb_html_a58ce97270e1033ca4f52b145c8fd21eb"><div class="ttname"><a href="namespace_a_k_1_1_wwise_1_1_plugin_a58ce97270e1033ca4f52b145c8fd21eb.html#a58ce97270e1033ca4f52b145c8fd21eb">AK.Wwise::Plugin::LicenseType</a></div><div class="ttdeci">LicenseType</div><div class="ttdoc">License type.</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_def_8h_source.html#l00058">PluginDef.h:59</a></div></div>
<div class="ttc" id="aclass_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_source_html"><div class="ttname"><a href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_source.html">AK.Wwise::Plugin::V1::Source</a></div><div class="ttdoc">Wwise API for general Audio Plug-in's backend.</div><div class="ttdef"><b>Definition:</b> <a href="_source_8h_source.html#l00090">Source.h:91</a></div></div>
<div class="ttc" id="aclass_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin_html"><div class="ttname"><a href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin.html">AK.Wwise::Plugin::V1::AudioPlugin</a></div><div class="ttdoc">Wwise API for general Audio Plug-in's backend.</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_2_audio_plugin_8h_source.html#l00130">AudioPlugin.h:133</a></div></div>
<div class="ttc" id="anamespace_a_k_1_1_wwise_1_1_plugin_a9c61cf9f6b1cb69de3722982150b67ed_html_a9c61cf9f6b1cb69de3722982150b67ed"><div class="ttname"><a href="namespace_a_k_1_1_wwise_1_1_plugin_a9c61cf9f6b1cb69de3722982150b67ed.html#a9c61cf9f6b1cb69de3722982150b67ed">AK.Wwise::Plugin::Severity</a></div><div class="ttdeci">Severity</div><div class="ttdoc">Log message severity.</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_def_8h_source.html#l00108">PluginDef.h:109</a></div></div>
<div class="ttc" id="a_plugin_info_generator_8h_ae72bc9efe38504b8f47686c01f5882f8_html_ae72bc9efe38504b8f47686c01f5882f8"><div class="ttname"><a href="_plugin_info_generator_8h_ae72bc9efe38504b8f47686c01f5882f8.html#ae72bc9efe38504b8f47686c01f5882f8">AK_ADD_PLUGIN_CLASS_TO_CONTAINER</a></div><div class="ttdeci">#define AK_ADD_PLUGIN_CLASS_TO_CONTAINER(ContainerName, WwiseClassName, AudioEngineRegisteredName)</div><div class="ttdoc">(C++) Adds a Wwise Authoring plug-in and a Sound Engine plug-in to a plug-in container.</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_info_generator_8h_source.html#l00882">PluginInfoGenerator.h:882</a></div></div>
<div class="ttc" id="aclass_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_source_acecbec655a9c34630b5b5c8efb29fe1d_html_acecbec655a9c34630b5b5c8efb29fe1d"><div class="ttname"><a href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_source_acecbec655a9c34630b5b5c8efb29fe1d.html#acecbec655a9c34630b5b5c8efb29fe1d">AK.Wwise::Plugin::V1::Source::GetSourceDuration</a></div><div class="ttdeci">virtual bool GetSourceDuration(double &amp;out_dblMinDuration, double &amp;out_dblMaxDuration) const =0</div><div class="ttdoc">Return the minimum and maximum duration, in seconds.</div></div>
<div class="ttc" id="aclass_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin_ae59a3955718ed3bbde0521da21cd8539_html_ae59a3955718ed3bbde0521da21cd8539"><div class="ttname"><a href="class_a_k_1_1_wwise_1_1_plugin_1_1_v1_1_1_audio_plugin_ae59a3955718ed3bbde0521da21cd8539.html#ae59a3955718ed3bbde0521da21cd8539">AK.Wwise::Plugin::V1::AudioPlugin::GetBankParameters</a></div><div class="ttdeci">virtual bool GetBankParameters(const GUID &amp;in_guidPlatform, DataWriter &amp;in_dataWriter) const</div><div class="ttdoc">Obtains parameters that will be written to a bank.</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_2_audio_plugin_8h_source.html#l00228">AudioPlugin.h:228</a></div></div>
<div class="ttc" id="anamespace_a_k_1_1_wwise_1_1_plugin_a74c80204b884826c56e3d208bd3d1df4_html_a74c80204b884826c56e3d208bd3d1df4"><div class="ttname"><a href="namespace_a_k_1_1_wwise_1_1_plugin_a74c80204b884826c56e3d208bd3d1df4.html#a74c80204b884826c56e3d208bd3d1df4">AK.Wwise::Plugin::LicenseStatus</a></div><div class="ttdeci">LicenseStatus</div><div class="ttdoc">License status.</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_def_8h_source.html#l00066">PluginDef.h:67</a></div></div>
<div class="ttc" id="astruct_g_u_i_d_html"><div class="ttname"><a href="struct_g_u_i_d.html">GUID</a></div><div class="ttdef"><b>Definition:</b> <a href="_plugin_helpers_8h_source.html#l00045">PluginHelpers.h:45</a></div></div>
</body>
</html>
