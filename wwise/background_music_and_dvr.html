<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Handling User Music (BGM) and DVR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Handling User Music (BGM) and DVR </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>On many consoles it is possible to replace the game music with the user's own music from their personal library. This feature is almost automatic in Wwise. However, there are some differences in implementation and behavior for some platforms. <br  />
</p>
<p>On all platforms, the initial setup is the same: the sound designer must tag the busses that will be muted when the user starts their music. This is done with the "Mute for Background Music" check box. On the code side, some additional details are needed depending on the platform.</p>
<h1><a class="anchor" id="bgm_and_dvr_Android"></a>
BGM details for Android</h1>
<p>Make sure to fill the jActivity member of the <a class="el" href="struct_ak_platform_init_settings.html">AkPlatformInitSettings</a>. The Mute/Unmute action will occur only when the user switches from the music player app to the game. This means that there is no "Unmute" if the user music finishes by itself.</p>
<h1><a class="anchor" id="bgm_and_dvr_iOS"></a>
BGM details for iOS</h1>
<p>Replacing the game music with an external music application is only possible if the application is using a "mixable" audio session configuration. There are two ways to have a mixable audio session:</p>
<ul>
<li>Using the Ambient audio session category.</li>
<li>Using the PlayAndRecord or Playback audio session categories, coupled with the MixWithOthers category option.</li>
</ul>
<p>Any other configuration stops the user's music application when the game is in the foreground.</p>
<h1><a class="anchor" id="bgm_and_dvr"></a>
Background Music on the DVR-enabled platforms (Xbox One, Xbox Series X, PlayStation 4, and PlayStation 5).</h1>
<p>Some platforms have a DVR function that allows the gamer to record their gameplay and publish it. This raises a few legal issues regarding copyrighted music that might be part of the game audio, or user-replaceable music. While the game studio has the rights to use the music in their game, the end-user may not have the rights to distribute it in any form. Thus, the platform requirements usually state that user background music should not be recorded. <br  />
</p>
<p>The cost-effective solution (CPU-wise) for this problem is to mix the music separately from the rest of the game. This is done using the Secondary Output feature.</p>
<h1><a class="anchor" id="setup_bgm_dvr_authoring"></a>
Setting up Background Music in the Authoring tool</h1>
<p>In the authoring tool, you will need to route your music objects to a separate master Audio Bus than the default or primary one. In most projects, this means creating a brand new master Audio Bus (right click on the Master Mixer Hierarchy's Work Unit and select Add &gt; Child). By default, all busses are routed to the System output. Change the Audio Device ShareSet to point to the DVR output.</p>
<p>Don't forget that not all platforms support a DVR. You will need to Unlink the Audio Device property to point to the System output for those platforms. Alternatively, unlink the Output Bus property of the music objects.</p>
<h1><a class="anchor" id="setup_bgm_dvr_code"></a>
Setting up the DVR Output in the Game Code</h1>
<p>The DVR output must be added manually, if used in the game. This is done with <code>AK::SoundEngine::AddOutput()</code>, passing the Audio Device ShareSet name (or ID) along with other parameters in <code><a class="el" href="struct_ak_output_settings.html" title="Platform-independent initialization settings of output devices.">AkOutputSettings</a></code>.</p>
<p>For an example, refer to <em>&lt;Wwise installation path&gt;/SDK/samples/IntegrationDemo/DemoPages/DemoBGM.cpp</em>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

