<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monitoring Errors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Monitoring Errors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Most of the SDK functions return an error code when an issue occurs. The Sound Engine, however, runs on its own thread, so it is possible that errors may occur without receiving a direct notification. Before being printed to the user, error codes are parsed by translators that will change the code into a meaningful message and resolve numerical identifiers to object names. By default, messages only go through the DefaultErrorMessageTranslator. See Error Message Translators for more details.</p>
<p>There are several ways to detect errors in the Sound Engine. You can do any of the following:</p>
<ul>
<li>Check for error codes returned by functions in the SDK.</li>
<li>Validate the error code that's sent in a callback specified on the sync call. This only applies when using asynchronous functions.</li>
<li>Call the function <code>AK::Monitor::SetLocalOutput()</code> to Enable/Disable local output of monitoring messages and errors. For this use case, be sure that the monitoring thread is started. Otherwise, the AkMonitor won't dispatch its notification and nothing will be sent to the local output. To start the monitoring, simply call <code>AkMonitor::Instance()-&gt;StartMonitoring()</code>. In the case where you don't want a separate thread running, make sure <code>AkMonitor::Instance()-&gt;InitMonitoring()</code> has been called and then manually call <code>AkMonitor::Instance()-&gt;DispatchNotification()</code>.</li>
<li>Connect the Wwise authoring application to the game using either the DEBUG or PROFILE setups. Before doing so, make sure communications are properly initialized. Refer to Initializing communications for details.</li>
<li>Monitor messages posted by the game using the functions <code>AK::Monitor::PostString()</code> and <code>AK::Monitor::PostCode()</code>.</li>
</ul>
<h1><a class="anchor" id="errormonitoring_translators"></a>
Error Message Translators</h1>
<p>Before sending error messages to the user, the Sound Engine sends an error code to the error message translators. The error message translators attempt to parse tags contained in the error code in order to create a more detailed error message. This page explains how to implement the translators in your project.</p>
<h2><a class="anchor" id="emt_implementation"></a>
Implementing Translators</h2>
<p>The following sections describe the two components needed when using error message translators.</p>
<h3><a class="anchor" id="emt_callback"></a>
Callback Function</h3>
<p>First, a callback function must be set to receive the monitoring messages. This function has to follow the signature of <code>AK::Monitor::LocalOutputFunc</code> and will be the function receiving the error message after the translation. It is in this function that you should define what you want to do with an error message. For example, in IntegrationDemo, <code>LocalErrorCallback</code> is the callback function. In the demo, when an error message is received, the current page content is modified to show the error message in red. To set the callback function, call <code>AK::Monitor::SetLocalOutput()</code> and pass the callback function pointer to be used.</p>
<h3><a class="anchor" id="emt_instances"></a>
Error Message Translators</h3>
<p>The Sound Engine has one default translator which transforms the error codes in readable messages. However, this translator simply prints the information it receives, such as IDs, directly in the error message, without trying to transform them into useful information, such as object names. It is highly recommended that you add other translators to the project in order to receive more detailed error messages. The translators are located in the folder SDK/tools/AkWwiseErrorHandler.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> Some translators may require that other libraries are added to the project. Refer to the documentation of each translator for details. </td></tr>
</table>
<p>Once the translators you want to use are added to the project, create an instance of them and install them in the monitor by calling <code>AK::Monitor::AddTranslator()</code>. It's important to keep track of the newly created instance in order to be able to delete it.</p>
<h2><a class="anchor" id="emt_types"></a>
Translator Types</h2>
<p>There are four translator types:</p>
<ul>
<li>Default: Translates error codes into messages, but prints numerical identifiers for Game Objects, Events, Audio Nodes, etc.</li>
<li>XML: Translates error codes into messages and uses the information found in SoundBanks.xml to resolve identifiers for Event, Audio Node and Media into meaningful names. Game Objects and some other entities are left in numeric format.</li>
<li>WAAPI (AkAutobahn.lib must be added in the linker-&gt;input project option): Translates error codes into messages and connects to the Wwise project (through a live Wwise instance) to resolve all identifiers into meaningful names.</li>
<li>Unity: Same as WAAPI, but also uses information from Unity. Usable only in Unity projects.</li>
</ul>
<p>Only the Default translator can handle standard printf-style tags (i.e., those that start with %). Each translator type can redefine how Wwise tags ($) should be handled. It's not necessary to handle every tag in a given translator. fallback translator can be defined, which is called after a translation attempt fails. A translator stack can then be created in order to chain multiple translators together until the translation is successful. The translator at the end of the stack is always a Default translator.</p>
<h2><a class="anchor" id="emt_tags"></a>
Supported Tags</h2>
<p>Translators use a tag system similar to the <code>printf()</code> function. The following tags are supported:</p>
<ul>
<li>Standard tags:<ul>
<li>%i: Integer</li>
<li>%f: Float</li>
<li>%u: Unsigned Integer (32 bits)</li>
<li>%llu: Unsigned Integer (64 bits)</li>
<li>%s: Strings</li>
</ul>
</li>
<li>Wwise tags:<ul>
<li>$b: Bank Id</li>
<li>$g: GameObject Id</li>
<li>$m: Media Id</li>
<li>$p: Plugin Id and ShareSet Id</li>
<li>$s: Switch/State Id</li>
<li>$w: WwiseObject Ids, such as an Event Id</li>
<li>$$: Escape character</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="new_error_message_translator"></a>
Creating a New Error Message Translator</h2>
<p>If needed, it's possible to create a new error message translator. Simply create a new class that inherits from the AssistedErrorMessageTranslator interface.</p>
<p>This class has two abstract methods:</p>
<ul>
<li><code>InitConnection()</code>: Makes sure the connection to the external source was successful (i.e., ensures the translator is ready to be used)</li>
<li><code>GetInfoFromExternalSource()</code>: Determines what to do with a given tag</li>
</ul>
<p>Your new translator doesn't need to handle all tags. It can rely on the next translator in the stack.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> If the new translator implements a way to handle the $p tag, make sure it handles both arguments: Plugin Id and ShareSet Id. See the ParseWwiseTag example in AkDefaultErrorMessageTranslator.cpp. </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

