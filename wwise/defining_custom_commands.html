<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Defining Command Add-ons</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Defining Command Add-ons </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="defining_custom_commands_overview"></a>
Command Add-ons Overview</h1>
<p>Command add-ons allow to define new commands for Wwise Authoring. Each command is associated with an external program that is being triggered by Wwise. Programs that are executed can receive a variety of predefined arguments that are derived from the currently selected objects.</p>
<p>Add-on commands can be triggered in different ways:</p><ul>
<li>Keyboard Shortcut</li>
<li>Contextual Menu</li>
<li>Main Menu</li>
<li>Control Surface</li>
<li>WAAPI using <a class="el" href="ak_wwise_ui_commands_execute.html">ak.wwise.ui.commands.execute</a></li>
</ul>
<p>Add-on commands can be defined on several levels:</p><ul>
<li>In the user data directory, under:<ul>
<li><b>Windows</b>: "%APPDATA%\\Audiokinetic\\Wwise\\Add-ons\\Commands"</li>
<li><b>macOS</b>: "$HOME/Library/Application Support/Audiokinetic/Wwise/Add-ons/Commands"</li>
</ul>
</li>
<li>In the installation folder, under:<ul>
<li><b>Windows</b>: "%WWISEROOT%\\Authoring\\Data\\Add-ons\\Commands"</li>
<li><b>macOS</b>: "/Library/Application Support/Audiokinetic/Wwise &lt;version&gt;/Authoring/Data/Add-ons/Commands"</li>
</ul>
</li>
<li>In the project folder, under "Add-ons\\Commands"</li>
<li>Using <a class="el" href="ak_wwise_ui_commands_register.html">ak.wwise.ui.commands.register</a></li>
</ul>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> In case of id conflict, only the first command loaded will be registered. The commands are loaded in the order specified above. </td></tr>
</table>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> Command add-ons specified in the installation folder or in the user data directory are loaded at Wwise startup. Command add-ons specified under the project are loaded at project load time. </td></tr>
</table>
<p>Additionally, every time a command is executed in Wwise, WAAPI will notify the subscribers with <a class="el" href="ak_wwise_ui_commands_executed.html">ak.wwise.ui.commands.executed</a>, passing the selected objects and honoring WAAPI return options. Add-on commands can be defined with no program to execute, so you could use the publication event to execute your own code in a WAAPI client.</p>
<h1><a class="anchor" id="defining_custom_commands_file_definition"></a>
Definition of Command Add-ons</h1>
<h2><a class="anchor" id="defining_custom_commands_file_definition_fields"></a>
Definition Fields</h2>
<p>A command is described by the following fields:</p>
<ul>
<li><b>id:</b> Defines a human readable unique ID for the command. To reduce the risk of ID conflicts, please use a concatenation of the author name, the product name, and the command name.</li>
<li><b>displayName:</b> Defines the name displayed in the user interface.</li>
<li><b>program:</b> Defines the program or script to run when the command is executed. Arguments are specified in 'args'.</li>
<li><b>args:</b> Defines the arguments. Refer to the documentation for the supported built-in variables. Note that in the case of multiple selection, the variables are expanded based on the startMode field.</li>
<li><b>cwd:</b> Defines the current working directory to execute the program.</li>
<li><b>defaultShortcut:</b> Defines the shortcut to use by default for this command. If the shortcut conflicts, it won't be used. This shortcut can be changed in the Keyboard Shortcut Manager.</li>
<li><b>redirectOutputs:</b> (Windows only) Defines if the standard output streams of the program (stdout + stderr) should be redirected and logged to Wwise on termination. This also prevents the window from displaying. Note that this feature should only be used for programs that will run briefly. The value is of boolean type and false by default.</li>
<li><b>startMode:</b> Specifies how to expand variables in the arguments field in case of multiple selection in the Wwise user interface. Possible values are:<ul>
<li><b>SingleSelectionSingleProcess:</b> Only supports single selection, will start the program once.</li>
<li><b>MultipleSelectionSingleProcessSpaceSeparated:</b> Program is started once with variables expanded to space separated arguments, each enclosed in double-quotes.</li>
<li><b>MultipleSelectionMultipleProcesses:</b> Program is started once per item selected, in parallel. Each running instance receives one selected item.</li>
</ul>
</li>
<li><b>contextMenu:</b> Specifies where the command will appear in the context menus and for which object types the command will be available. This field can include any of the following items:<ul>
<li><b>basePath:</b> Defines a forward-slash separated path for the parent sub-menus. If empty, the menu is inserted at the first level.</li>
<li><b>enabledFor:</b> Defines a comma-separated list of the object type names for which the item is enabled. Refer to <a class="el" href="wobjects_index.html">Wwise Objects Reference</a> for the list of type names supported. If empty, any type is allowed.</li>
<li><b>visibleFor:</b> Defines a comma-separated list of the object type names for which the item is visible. Refer to <a class="el" href="wobjects_index.html">Wwise Objects Reference</a> for the list of type names supported. If empty, any type is allowed.</li>
</ul>
</li>
<li><b>mainMenu:</b> Specifies where the command will appear in the Wwise menus.<ul>
<li><b>basePath:</b> Defines a forward-slash separated path for the parent sub-menus. It must at least define one level, which is associated with the top menu.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="accessing_common_directories"></a>
Common Directories</h2>
<p>The following predefined directories should be used in the <code>program</code> field to avoid machine-specific absolute paths. They can also be used in the <code>args</code> field to pass a path as an argument to the program and in the <code>cwd</code> field to define the current working directory.</p>
<table border="1">
<tr>
<th>Variable</th><th>Referenced Location </th></tr>
<tr>
<td>${CurrentCommandDirectory}</td><td>The directory where the current command is defined. As mentioned above, it should be "Add-ons\\Commands". </td></tr>
<tr>
<td>${WwiseInstallRoot}</td><td>The Wwise installation directory. </td></tr>
<tr>
<td>${WwiseInstallBin}</td><td>The Wwise.exe directory. </td></tr>
<tr>
<td>${WwiseInstallAddons}</td><td><b>Windows</b>: "${WwiseInstallRoot}\\Authoring\\Data\\Add-ons"<br  />
 <b>macOS</b>: "/Library/Application Support/Audiokinetic/Wwise &lt;version&gt;/Authoring/Data/Add-ons/Commands"  </td></tr>
<tr>
<td>${WwiseUserAddons}</td><td><b>Windows</b>: "%APPDATA%\\Audiokinetic\\Wwise\\Add-ons"<br  />
 <b>macOS</b>: "$HOME/Library/Application Support/Audiokinetic/Wwise/Add-ons/Commands"  </td></tr>
<tr>
<td>${WwiseProjectRoot}</td><td>The Wwise project directory. </td></tr>
<tr>
<td>${WwiseProjectAddons}</td><td>"${WwiseProjectRoot}\\Add-ons" </td></tr>
<tr>
<td>${WwiseProjectOriginals}</td><td>"${WwiseProjectRoot}\\Originals" </td></tr>
<tr>
<td>${WwiseProjectSoundbanks}</td><td>Platform-specific generated soundbanks directory. </td></tr>
</table>
<h2><a class="anchor" id="defining_custom_commands_variables"></a>
Argument Variables</h2>
<p>Zero to many variables can be used in the <code>args</code> field (program arguments). Variables provide a way to access information from the selected objects. For example, you could retrieve an object id and pass it as an argument. Variables also provide a way to access property values from the selected objects, including Custom Properties values. To learn more about Custom Properties, refer to <a class="el" href="defining_custom_properties.html">Defining Custom Properties</a>.</p>
<p>For a complete list of possible expressions in variables, refer to the <b>Object Expressions</b> and <b>Value Expressions</b> sections in <a class="el" href="waql_reference.html">Wwise Authoring Query Language (WAQL) Reference</a>.</p>
<p>When the selection is multiple, refer to <code>startMode</code> to learn how these variables are resolved.</p>
<p><b>Examples:</b> </p><table border="1">
<tr>
<th>Variable</th><th>Type</th><th>Description </th></tr>
<tr>
<td>${id}</td><td>string</td><td>The object ID (<a class="el" href="struct_g_u_i_d.html">GUID</a>). </td></tr>
<tr>
<td>${name}</td><td>string</td><td>The object name. </td></tr>
<tr>
<td>${notes}</td><td>string</td><td>The object notes. </td></tr>
<tr>
<td>${type}</td><td>string</td><td>The object type. Refer to <a class="el" href="wobjects_index.html">Wwise Objects Reference</a> for more information on the types available. </td></tr>
<tr>
<td>${path}</td><td>string</td><td>The object path from the project root. Ex: '\\Actor-Mixer Hierarchy\\Default Work Unit\\Sound1' </td></tr>
<tr>
<td>${filePath}</td><td>string</td><td>The path to the file containing the object. The path can be a Work Unit file, or a project file. </td></tr>
<tr>
<td>${originalWavFilePath}</td><td>string</td><td>Absolute path to the original WAV file. Only valid for Sound and Audio Source objects. </td></tr>
<tr>
<td>${convertedWemFilePath}</td><td>string</td><td>Absolute path to the converted WEM file. Specify the platform in the options. Only valid for Sound and Audio Source objects. </td></tr>
<tr>
<td>${soundbankBnkFilePath}</td><td>string</td><td>Absolute path to the generated SoundBank file associated with the SoundBank object. Only valid for SoundBank objects. </td></tr>
<tr>
<td>${workunitIsDirty}</td><td>boolean</td><td>True if a Work Unit or a Project (wproj file) is dirty, meaning it is modified but not saved. </td></tr>
<tr>
<td>${Volume}</td><td>string</td><td>The Voice Volume. </td></tr>
<tr>
<td>${OutputBus.name}</td><td>string</td><td>The Output Bus name. </td></tr>
</table>
<h1><a class="anchor" id="defining_custom_commands_examples"></a>
Command Add-ons Examples</h1>
<h2><a class="anchor" id="defining_custom_commands_file_example"></a>
Examples Using a Command Definition File</h2>
<p>To create new commands, create a JSON file under one of the directories listed in <a class="el" href="defining_custom_commands.html">Defining Command Add-ons</a> and specify the version to be 2. Please be aware that multiple 3rd parties can create files under these directories. In order to reduce the risk of filename conflicts, we recommend using the following convention for the filenames: companyname_productname.json</p>
<p>Example: <b>mycompany_myproduct.json</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;version&quot;</span>:2,</div>
<div class="line">    <span class="stringliteral">&quot;commands&quot;</span>:[</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;id&quot;</span>:<span class="stringliteral">&quot;ak.edit_in_vscode&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;displayName&quot;</span>:<span class="stringliteral">&quot;Edit in Visual Studio Code&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;defaultShortcut&quot;</span>:<span class="stringliteral">&quot;C&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;program&quot;</span>:<span class="stringliteral">&quot;code&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;startMode&quot;</span>:<span class="stringliteral">&quot;MultipleSelectionSingleProcessSpaceSeparated&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;args&quot;</span>:<span class="stringliteral">&quot;${filePath}&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;cwd&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;contextMenu&quot;</span>:{</div>
<div class="line">                    <span class="stringliteral">&quot;basePath&quot;</span>:<span class="stringliteral">&quot;Editors&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;enabledFor&quot;</span>:<span class="stringliteral">&quot;Sound,ActorMixer,SwitchContainer,RandomSequenceContainer&quot;</span></div>
<div class="line">                },          </div>
<div class="line">            <span class="stringliteral">&quot;mainMenu&quot;</span>:{</div>
<div class="line">                    <span class="stringliteral">&quot;basePath&quot;</span>:<span class="stringliteral">&quot;Extra&quot;</span></div>
<div class="line">                }</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;id&quot;</span>:<span class="stringliteral">&quot;ak.open_in_wavosaur&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;displayName&quot;</span>:<span class="stringliteral">&quot;Edit in My Wav Editor&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;defaultShortcut&quot;</span>:<span class="stringliteral">&quot;W&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;program&quot;</span>:<span class="stringliteral">&quot;c:\\MyWavEditor\\WavEditor.exe&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;args&quot;</span>:<span class="stringliteral">&quot;${originalWavFilePath}&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;cwd&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;contextMenu&quot;</span>:{}</div>
<div class="line">        }          </div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="defining_custom_commands_waapi_example"></a>
Example Using WAAPI</h2>
<p>The exact same JSON command code as above can be passed to WAAPI <a class="el" href="ak_wwise_ui_commands_register.html">ak.wwise.ui.commands.register</a>, to add new commands to the current Wwise process. <br  />
</p>
<p>Please note that commands added with ak.wwise.ui.commands.register are not persisted. They will remain until the Wwise process terminates. You will have to register them again next time.</p>
<h1><a class="anchor" id="defining_custom_commands_with_waapi"></a>
Using Add-on Commands in Conjunction with WAAPI</h1>
<p>Add-on commands can be used to execute WAAPI scripts or programs. This gives you access to Wwise functionalities and project data. Refer to <a class="el" href="waapi.html">Using the Wwise Authoring API (WAAPI)</a> to learn what you can do with WAAPI.</p>
<h1><a class="anchor" id="mac_specifics"></a>
Using Add-on Commands on Mac</h1>
<p>Add-on commands are executed on Mac using</p><div class="fragment"><div class="line">/bin/sh -c </div>
</div><!-- fragment --><p>. Any app, executable or script can be directly specified in <code>program</code>.</p>
<p>Example: <b>mycompany_myproduct_forMac.json</b> </p><div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;version&quot;</span>:2,</div>
<div class="line">    <span class="stringliteral">&quot;commands&quot;</span>:[</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;id&quot;</span>:<span class="stringliteral">&quot;ak.edit_in_audacity&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;displayName&quot;</span>:<span class="stringliteral">&quot;Open wav in Audacity&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;defaultShortcut&quot;</span>:<span class="stringliteral">&quot;A&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;program&quot;</span>:<span class="stringliteral">&quot;/Applications/Audacity.app&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;startMode&quot;</span>:<span class="stringliteral">&quot;SingleSelectionSingleProcess&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;args&quot;</span>:<span class="stringliteral">&quot;${sound:originalWavFilePath}&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;cwd&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;contextMenu&quot;</span>: {</div>
<div class="line">                <span class="stringliteral">&quot;basePath&quot;</span>:<span class="stringliteral">&quot;Editors&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;enabledFor&quot;</span>:<span class="stringliteral">&quot;Sound&quot;</span></div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;id&quot;</span>:<span class="stringliteral">&quot;ak.edit_in_script&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;displayName&quot;</span>:<span class="stringliteral">&quot;Open in script&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;defaultShortcut&quot;</span>:<span class="stringliteral">&quot;B&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;program&quot;</span>:<span class="stringliteral">&quot;/path/to/folder with spaces/myScript.sh&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;startMode&quot;</span>:<span class="stringliteral">&quot;SingleSelectionSingleProcess&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;args&quot;</span>:<span class="stringliteral">&quot;${sound:originalWavFilePath}&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;cwd&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;contextMenu&quot;</span>: {</div>
<div class="line">                <span class="stringliteral">&quot;basePath&quot;</span>:<span class="stringliteral">&quot;Editors&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;enabledFor&quot;</span>:<span class="stringliteral">&quot;Sound&quot;</span></div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

