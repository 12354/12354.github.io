<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Advanced Topics in Rooms and Portals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Advanced Topics in Rooms and Portals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="spatial_audio_roomsportals_obsocc"></a>
Combining Rooms and Portals with Obstruction and Occlusion</h1>
<p>In the context of Wwise Spatial Audio, sound propagation from other rooms is entirely managed by the Rooms and Portals abstraction. Rooms with at least one propagation path to the listener via open Portals will simulate diffraction. Additionally, rooms will model transmission of sound through walls. Diffraction and Transmission Loss values are applied to the emitter game object. In the Wwise Authoring application, you can choose whether you want these values to attenuate the sound using the attenuation curves or using built-in game parameters instead. If a sound doesn't have an attenuation instance (either custom or ShareSet), the project obstruction and occlusion curves are used to attenuate the sound according to diffraction and transmission loss, respectively.</p>
<p>If you wish to implement your own solution for obstruction (for example, one driven by game-side raycasting), in conjunction with diffraction set from Spatial Audio, the game can use the sound engine API <code>AK::SoundEngine::SetObjectObstructionAndOcclusion</code>. For the occlusion of portal openings, the game can use the Spatial Audio API <code>AK::SpatialAudio::SetPortalObstructionAndOcclusion</code>. You can also apply obstruction on the sound path between an emitter and a nearby portal, a listener and a nearby portal or a pair of consecutive portals with the help of <code>AK::SpatialAudio::SetGameObjectToPortalObstruction</code> and <code>AK::SpatialAudio::SetPortalToPortalObstruction</code>. Under no circumstances should the game call <code>AK::SoundEngine::SetObjectObstructionAndOcclusion</code> with a room ID as the game object parameters, as the results are undefined. Refer to section Modeling Obstacles Within a Room for more detail on how to use same-room obstruction with Spatial Audio.</p>
<p>Refer to <a class="el" href="spatial_audio_concepts.html">Spatial Audio Concepts</a> for a review of these acoustic concepts.</p>
<h1><a class="anchor" id="spatial_audio_roomsportals_modelingsoundpropagationfromsameroom"></a>
Modeling Obstacles Within a Room</h1>
<p>Obstruction of sound emitted from the same room as that of the listener can be handled by using Geometric Diffraction (see <a class="el" href="spatial_audio_apigeometry_diffract.html">Using the Geometry API for Simulating Diffraction and Transmission</a> and Combining the Geometric APIs with Rooms and Portals) but it is not covered by Spatial Audio Rooms and Portals alone. If one does not wish to send geometry to Spatial Audio for the purpose of obstruction calculation, obstruction in the same room must be handled on the game side. The representation of geometry, methods, and the desired level of details for computing in-room obstruction is highly game-engine specific. Games typically employ ray-casting, with various degrees of sophistication, to carry out this task. This section provides some tips on how to implement obstruction on the game side in conjunction with Rooms and Portals.</p>
<p>With Spatial Audio Rooms and Portals though, you don't need to do this for all emitters, but only those that are in the same Room as the listener. This is beneficial because ray-casting is usually much more expensive than the algorithm used by Spatial Audio for computing propagation paths. Since in-room obstruction between an emitter and the listener happens in the same room, by definition, we assume that the obstacle will not cover the listener or emitter integrally, and that the sound will reach the listener through its reflections in the room. This can be properly modeled by affecting the dry/direct signal path only, and not the auxiliary send, which means that Obstruction is the proper mechanism. For this purpose, the game should call <code>AK::SoundEngine::SetObjectObstructionAndOcclusion</code>.</p>
<p>Furthermore, Portals to adjacent rooms should be considered like sound emitters in the listener's Room. Therefore, games should also run their obstruction algorithms between the listener and the Portals of the Room in which it is. Then, they need to call <code>AK::SpatialAudio::SetPortalObstructionAndOcclusion</code> for each of these portals in order to safely declare in-room obstruction with the listener.</p>
<h1><a class="anchor" id="spatial_audio_roomsportals_complexroomreverb"></a>
Implementing Complex Room Reverberation</h1>
<p>It is possible for the game to use <code>AK::SoundEngine::SetGameObjectAuxSendValues</code> in conjunction with Spatial Audio rooms. The game's sends will be added in addition to the send to the room object's auxiliary bus, as defined by <code>AkRoomParams::ReverbAuxBus</code>.</p>
<p>Additionally, it is possible to use <code>AK::SoundEngine::SetObjectObstructionAndOcclusion</code> or <code>AK::SoundEngine::SetMultipleObstructionAndOcclusion</code> with Spatial Audio emitters, even though Spatial Audio already uses diffraction and transmission. Refer to section Modeling Sound Propagation from Other Rooms and Modeling Obstacles Within a Room for more details on obstruction and occlusion and how to use them with Spatial Audio Rooms and Portals.</p>
<p>The sound engine API <code>AK::SoundEngine::SetGameObjectAuxSendValues</code> may be used to add additional Auxiliary Sends to the ones that are set by Spatial Audio. This may be useful when designing complex reverberation within the same room, for example, if there are objects or terrain that call for different environmental effects. A Room's <code>AkRoomParams::ReverbAuxBus</code> can also be left to "none" (<code>AK_INVALID_AUX_ID</code>), so that its send busses are only managed by the game via <code>AK::SoundEngine::SetGameObjectAuxSendValues</code>.</p>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="spatial_audio_roomsportals_paths.html">Propagation Paths in the Rooms and Portals Signal Model</a></li>
<li><a class="el" href="spatial_audio_third_person.html">Third-Person Perspective and Spatial Audio</a> </li>
</ul>
</dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

