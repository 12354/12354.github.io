<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Integration Details - GetSourcePlayPosition</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Integration Details - GetSourcePlayPosition </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="soundengine_query_pos_intro"></a>
Introduction</h1>
<p>In certain circumstances, the game engine requires information about the current playback position of a particular sound. For example, games that support rendering video and audio contents in a synchronous manner must query the playback position of sounds to render game visuals appropriately. If this has to be done on a frame-by-frame basis (such as to synchronize lip movement and dialog), then playback position queries are preferable over markers. Another advantage of playback position queries is that the source files do not need to be edited. The AK::SoundEngine::GetSourcePlayPosition() method returns the time elapsed on an event's first sound playback.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> Markers are useful for signalling specific events happening in a sound file, as opposed to small increments in sound playback. </td></tr>
</table>
<h1><a class="anchor" id="soundengine_query_pos_integration"></a>
Integration</h1>
<p>To be able to query the playback position of a source, you must pass the AK_EnableGetSourcePlayPosition flag to the AK::SoundEngine::PostEvent() method. This informs the sound engine that the source associated with this event should be given special consideration because AK::SoundEngine::GetSourcePlayPosition() can be called at any time for this AkPlayingID.</p>
<p>You can then call the AK::SoundEngine::GetSourcePlayPosition() method by passing the AkPlayingID received from the call to AK::SoundEngine::PostEvent() to get the current playback position of the source being played.</p>
<h1><a class="anchor" id="soundengine_query_pos_example"></a>
Example</h1>
<p>The following piece of code illustrates the AK::SoundEngine::GetSourcePlayPosition() method's usage:</p>
<div class="fragment"><div class="line">(...)</div>
<div class="line"><span class="keyword">static</span> AkPlayingID g_markersPlayingID = 0;</div>
<div class="line">(...)</div>
<div class="line"> </div>
<div class="line">(...)</div>
<div class="line"> </div>
<div class="line">g_markersPlayingID = AK::SoundEngine::PostEvent( AK::EVENTS::PLAY_MARKERS_TEST, GAME_OBJECT_ID_MARKERS,</div>
<div class="line">    AK_EnableGetSourcePlayPosition, NULL, NULL );</div>
<div class="line"> </div>
<div class="line">(...)</div>
<div class="line"> </div>
<div class="line">AkTimeMs uPosition = 0;</div>
<div class="line"><span class="comment">// Somewhere in your game loop (happens periodically):</span></div>
<div class="line">AK::SoundEngine::GetSourcePlayPosition( g_markersPlayingID, &amp;uPosition );</div>
<div class="line"><span class="comment">// Now handle lip synchronization by using uPosition</span></div>
</div><!-- fragment --><h1><a class="anchor" id="soundengine_query_pos_limitations"></a>
Limitations</h1>
<ul>
<li>When an event contains multiple play actions, GetSourcePlayPosition() returns the position of the first source played by the target of the first play action occurring at time 0. When this source stops, the source whose position is returned is undefined.</li>
<li>Continuous (random or sequence) containers return the position of the sound that is currently playing. When there are many sounds, the source whose position is returned is undefined. In crossfade or sample-accurate transitions, the next source returns its position only when the previous source has finished playing.</li>
<li>When used with extrapolation, looping sources may overshoot the loop end for a short period of time when the loop occurs.</li>
<li>Some virtual voices are killed when their priority falls under a certain threshold. When this happens, you might receive an error code from AK::SoundEngine::GetSourcePlayPosition(). You should always check the return value when calling AK::SoundEngine::GetSourcePlayPosition().</li>
<li>Dynamic pitch changes may result in slightly offset playback positions for a short period of time during the transition.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="soundengine_events.html">Integration Details - Events</a></li>
<li>AK::SoundEngine::PostEvent()</li>
<li>AK::SoundEngine::GetSourcePlayPosition() </li>
</ul>
</dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="a_common_2_ak_types_8h_a8a4d0aa5dba6f9922d6b7b3e48958b24_html_a8a4d0aa5dba6f9922d6b7b3e48958b24"><div class="ttname">AkTimeMs</div><div class="ttdeci">AkInt32 AkTimeMs</div><div class="ttdoc">Time in ms.</div><div class="ttdef"><b>Definition:</b> AkTypes.h:138</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname">NULL</div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> AkTypes.h:46</div></div>
<div class="ttc" id="a_ak_callback_8h_a948c083ff18dc4c8dfe1d32cb0eb6732_html_a948c083ff18dc4c8dfe1d32cb0eb6732a9fab95238e3a54d38d41b988615a69f4"><div class="ttname">AK_EnableGetSourcePlayPosition</div><div class="ttdeci">@ AK_EnableGetSourcePlayPosition</div><div class="ttdoc">Enable play position information for use by AK::SoundEngine::GetSourcePlayPosition().</div><div class="ttdef"><b>Definition:</b> AkCallback.h:75</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_ae0b469d9fb8a099b40f52f004882d283_html_ae0b469d9fb8a099b40f52f004882d283"><div class="ttname">AK::SoundEngine::GetSourcePlayPosition</div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT GetSourcePlayPosition(AkPlayingID in_PlayingID, AkTimeMs *out_puPosition, bool in_bExtrapolate=true)</div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a41e9ef8d42951871fe4a8ae58a29a68e_html_a41e9ef8d42951871fe4a8ae58a29a68e"><div class="ttname">AK::SoundEngine::PostEvent</div><div class="ttdeci">AKSOUNDENGINE_API AkPlayingID PostEvent(AkUniqueID in_eventID, AkGameObjectID in_gameObjectID, AkUInt32 in_uFlags=0, AkCallbackFunc in_pfnCallback=NULL, void *in_pCookie=NULL, AkUInt32 in_cExternals=0, AkExternalSourceInfo *in_pExternalSources=NULL, AkPlayingID in_PlayingID=AK_INVALID_PLAYING_ID)</div></div>
<div class="ttc" id="a_common_2_ak_types_8h_a9270609771369ea575443fe080bbe9c3_html_a9270609771369ea575443fe080bbe9c3"><div class="ttname">AkPlayingID</div><div class="ttdeci">AkUInt32 AkPlayingID</div><div class="ttdoc">Playing ID.</div><div class="ttdef"><b>Definition:</b> AkTypes.h:137</div></div>
</body>
</html>

