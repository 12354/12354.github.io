<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Obstruction and Occlusion with game-defined auxiliary sends</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="akdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wwise SDK 2023.1.0 - Windows
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Obstruction and Occlusion with game-defined auxiliary sends </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A typical condition is having a game object that becomes either obstructed by another object (such as a wall or beam), or occluded in a room where the listener can only hear a few sounds leaking through the walls. Auxiliary sends can represent the reflections of the signal.</p>
<p>The following diagrams illustrate examples of occlusion and obstruction.</p>
<div class="image">
<img src="obstruction.gif" alt=""/>
<div class="caption">
Example of an Obstruction</div></div>
<p>Obstruction can be modeled by applying a volume control and/or a Low Pass Filter (LPF) affecting only the direct path of the signal. The auxiliary send reflections are unaffected.</p>
<div class="image">
<img src="occlusion.gif" alt=""/>
<div class="caption">
Example of an Occlusion</div></div>
<p>Occlusion can be modeled by applying a volume control and/or a LPF affecting both the direct path and the auxiliary send reflections of the signal.</p>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Note.gif" alt="" class="inline"/></td><td><b>Note:</b> Obstructions and occlusions can happen simultaneously and are modeled with the direct path being affected by both the obstruction and occlusion value. However, the reflection path is affected by the occlusion value only. </td></tr>
</table>
<p>Here is a diagram of the obstruction/occlusion processing pipeline inside the sound engine:</p>
<div class="image">
<img src="obs_occ_processing.gif" alt=""/>
<div class="caption">
Obstruction/Occlusion Processing Pipeline</div></div>
<h1><a class="anchor" id="soundengine_environments_setting_obsocc"></a>
Setting Obstruction and Occlusion</h1>
<p>The game engine is responsible for determining the obstruction and occlusion values, which it does using the position of the objects and listeners in the game's geometry.</p>
<p>Sound designers have access to curves in the authoring tool to determine how the volume and LPF will react to calculated obstruction and occlusion values. They can also enable or disable the usage of any curve to best suit their performance and realism needs.</p>
<p>By default, all sounds will use the curves located in the Wwise Project Settings' Obstruction/Occlusion Tab.</p>
<div class="image">
<img src="project_settings_curves.gif" alt=""/>
<div class="caption">
Customizing the Project Obstruction and Occlusion Curves in Wwise</div></div>
<p>Using the curve of this snapshot, setting an obstruction value of 1.0f (100%) will produce a volume change of -50 dB on the source object.</p>
<p>For more information on customizing the project obstruction and occlusion curves with Wwise, refer to the <a href="https://www.audiokinetic.com/library/edge/?source=Help&amp;id=defining_obstruction_and_occlusion_curves_for_project" target="_blank">Wwise Help</a>.</p>
<p>Obstruction and Occlusion can also be disabled, enabled, and set per sound with the help of the Obstruction and Occlusion curves of the Attenuation ShareSet. For more information, refer to the <a href="https://www.audiokinetic.com/library/edge/?source=Help&amp;id=applying_distance_based_attenuation" target="_blank">Applying Attenuation</a> section of the Wwise Help.</p>
<p>Game designers must calculate the obstruction and occlusion for each game object affecting each listener and pass down the values to the sound engine using the following call:</p>
<ul>
<li><a class="el" href="namespace_a_k_1_1_sound_engine_a1b3e18a25b405e55ba82de9b70cd11ba.html#a1b3e18a25b405e55ba82de9b70cd11ba">AK::SoundEngine::SetObjectObstructionAndOcclusion()</a></li>
</ul>
<table border="0" cellspacing="0" cellpadding="2">
<tr>
<td valign="top"><img src="images/Caution.gif" alt="" class="inline"/></td><td><b>Caution:</b> Obstruction and Occlusion levels must always be a value between 0.0f and 1.0f. </td></tr>
</table>
<p>When multiple listeners are enabled for a game object, the sound engine determines the minimum LPF value and maximum volume value that should be heard for all listeners; it then uses that value to compute the resulting obstruction/occlusion.</p>
<h2><a class="anchor" id="soundengine_obsocc_example"></a>
Example: Setting Obstruction and Occlusion</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#define MAIN_LISTENER        0</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// game loop</span></div>
<div class="line"><span class="keywordflow">while</span>( TRUE )</div>
<div class="line">{</div>
<div class="line">    (...)</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> iGameObject = 0; iGameObject &lt; nbObjects; iGameObject++ )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98.html#afc38459f26e2b23defe588026e886a98">AkReal32</a> fCalculatedObs, fCalculatedOcc;</div>
<div class="line">        pGeometryModule-&gt;GetObsAndOccForGameObject( iGameObject, MAIN_LISTENER, &amp;fCalculatedObs, &amp;fCalculatedOcc );</div>
<div class="line">        <a class="code" href="namespace_a_k_1_1_sound_engine_a1b3e18a25b405e55ba82de9b70cd11ba.html#a1b3e18a25b405e55ba82de9b70cd11ba">AK::SoundEngine::SetObjectObstructionAndOcclusion</a>( iGameObject, MAIN_LISTENER, fCalculatedObs, fCalculatedOcc );</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    (...)</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><ul>
<li><a class="el" href="concept_environments.html">Concept: Environments and game-defined auxiliary sends</a></li>
<li><a class="el" href="soundengine_environments.html">Integration Details - Environments and Game-defined Auxiliary Sends</a></li>
<li><a class="el" href="namespace_a_k_1_1_sound_engine_a1b3e18a25b405e55ba82de9b70cd11ba.html#a1b3e18a25b405e55ba82de9b70cd11ba">AK::SoundEngine::SetObjectObstructionAndOcclusion()</a> </li>
</ul>
</dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="a_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98_html_afc38459f26e2b23defe588026e886a98"><div class="ttname"><a href="_ak_numeral_types_8h_afc38459f26e2b23defe588026e886a98.html#afc38459f26e2b23defe588026e886a98">AkReal32</a></div><div class="ttdeci">float AkReal32</div><div class="ttdoc">32-bit floating point</div><div class="ttdef"><b>Definition:</b> <a href="_ak_numeral_types_8h_source.html#l00046">AkNumeralTypes.h:46</a></div></div>
<div class="ttc" id="anamespace_a_k_1_1_sound_engine_a1b3e18a25b405e55ba82de9b70cd11ba_html_a1b3e18a25b405e55ba82de9b70cd11ba"><div class="ttname"><a href="namespace_a_k_1_1_sound_engine_a1b3e18a25b405e55ba82de9b70cd11ba.html#a1b3e18a25b405e55ba82de9b70cd11ba">AK::SoundEngine::SetObjectObstructionAndOcclusion</a></div><div class="ttdeci">AKSOUNDENGINE_API AKRESULT SetObjectObstructionAndOcclusion(AkGameObjectID in_EmitterID, AkGameObjectID in_ListenerID, AkReal32 in_fObstructionLevel, AkReal32 in_fOcclusionLevel)</div></div>
</body>
</html>
